(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76ccefa6"],{"0c6d":function(t,e,a){"use strict";a("d3b7");var i=a("bc3a"),r=a.n(i),n=a("5c96"),s=a("4328"),l=a.n(s),o=r.a.create({baseURL:"https://bufan.cloud",timeout:5e3});function c(t){var e,a={};return a.url=t.url,"post"===(null===(e=t.method)||void 0===e?void 0:e.toLowerCase())?(a.method="post",a.headers={},a.headers["Content-Type"]="application/x-www-form-urlencoded",a.data=l.a.stringify(t.data,{allowDots:!0,arrayFormat:"repeat"})):a.params=t.data,o(a)}o.interceptors.request.use((function(t){return t}),(function(t){return console.log(t),Promise.reject(t)})),o.interceptors.response.use((function(t){var e=t.data;return e}),(function(t){return console.log("err"+t),Object(n["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)})),e["a"]=c},"49de":function(t,e,a){"use strict";var i=a("0c6d"),r={getMaterialList:function(t){return Object(i["a"])({url:"/api/leju/admin/material/list",data:t})},delMaterial:function(t){return Object(i["a"])({url:"/api/leju/admin/material/del",data:t})},delOssMaterial:function(t){return Object(i["a"])({url:"/api/leju/admin/material/removeFile",data:t})}};e["a"]=r},"5cf7":function(t,e,a){"use strict";var i=a("7542"),r=a.n(i);r.a},7542:function(t,e,a){},"7d09":function(t,e,a){"use strict";var i=a("0c6d"),r={getAllSeriesList:function(t){return Object(i["a"])({url:"/api/leju/admin/series/allList",data:t})},delSeries:function(t){return Object(i["a"])({url:"/api/leju/admin/series/del",data:t})},saveOrUpdateSeries:function(t){return Object(i["a"])({url:"/api/leju/admin/series/saveOrUpdate",method:"post",data:t})}};e["a"]=r},8256:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tinymce-container",class:{fullscreen:t.fullscreen},style:{width:t.containerWidth}},[a("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),t._v(" "),a("div",{staticClass:"editor-custom-btn-container"},[a("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:t.imageSuccessCBK}})],1)])},r=[],n=(a("4160"),a("a9e3"),a("b680"),a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload-container"},[a("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(" upload ")]),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v(" Click upload ")])],1),a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(" Cancel ")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(" Confirm ")])],1)],1)}),s=[],l=(a("a623"),a("d81d"),a("b64b"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return Object.keys(this.listObj).every((function(e){return t.listObj[e].hasSuccess}))},handleSubmit:function(){var t=this,e=Object.keys(this.listObj).map((function(e){return t.listObj[e]}));this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(t,e){for(var a=e.uid,i=Object.keys(this.listObj),r=0,n=i.length;r<n;r++)if(this.listObj[i[r]].uid===a)return this.listObj[i[r]].url=t.files.file,void(this.listObj[i[r]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,a=Object.keys(this.listObj),i=0,r=a.length;i<r;i++)if(this.listObj[a[i]].uid===e)return void delete this.listObj[a[i]]},beforeUpload:function(t){var e=this,a=window.URL||window.webkitURL,i=t.uid;return this.listObj[i]={},new Promise((function(r,n){var s=new Image;s.src=a.createObjectURL(t),s.onload=function(){e.listObj[i]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},r(!0)}))}}}),o=l,c=(a("e791"),a("2877")),u=Object(c["a"])(o,n,s,!1,null,"30ea5378",null),d=u.exports,p=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],m=p,f=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],h=f,b=a("b85c"),v=[];function g(){return window.tinymce}var O=function(t,e){var a=document.getElementById(t),i=e||function(){};if(!a){var r=document.createElement("script");r.src=t,r.id=t,document.body.appendChild(r),v.push(i);var n="onload"in r?s:l;n(r)}function s(e){e.onload=function(){this.onerror=this.onload=null;var t,a=Object(b["a"])(v);try{for(a.s();!(t=a.n()).done;){var i=t.value;i(null,e)}}catch(r){a.e(r)}finally{a.f()}v=null},e.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+t),e)}}function l(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e,a=Object(b["a"])(v);try{for(a.s();!(e=a.n()).done;){var i=e.value;i(null,t)}}catch(r){a.e(r)}finally{a.f()}v=null}}}a&&i&&(g()?i(null,a):v.push(i))},y=O,_="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",w={name:"Tinymce",components:{editorImage:d},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(e.tinymceId).setContent(t||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var t=this;y(_,(function(e){e?t.$message.error(e.message):t.initTinymce()}))},initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:h,menubar:this.menubar,plugins:m,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(a){e.value&&a.setContent(e.value),e.hasInit=!0,a.on("NodeChange Change KeyUp SetContent",(function(){t.hasChange=!0,t.$emit("input",a.getContent())}))},setup:function(t){t.on("FullscreenStateChanged",(function(t){e.fullscreen=t.state}))},convert_urls:!1})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(t){var e=t;return e?window.tinymce.get(this.tinymceId).getContent(e):window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach((function(t){return window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'.concat(t.url,'" >'))}))}}},k=w,j=(a("5cf7"),Object(c["a"])(k,i,r,!1,null,"19aa6e6f",null));e["a"]=j.exports},"9add":function(t,e,a){"use strict";var i=a("0c6d"),r={getAllBrandList:function(t){return Object(i["a"])({url:"/api/leju/admin/brand/listAll",data:t})},getBrandList:function(t){return Object(i["a"])({url:"/api/leju/admin/brand/list",data:t})},getBrandDetail:function(t){return Object(i["a"])({url:"/api/leju/admin/brand/detail",data:t})},delBrand:function(t){return Object(i["a"])({url:"/api/leju/admin/brand/del",data:t})},saveOrUpdateBrand:function(t){return Object(i["a"])({url:"/api/leju/admin/brand/saveOrUpdate",method:"post",data:t})}};e["a"]=r},a430:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-add-main"},[a("el-steps",{staticStyle:{"margin-top":"30px"},attrs:{active:t.active,"finish-status":"success","align-center":""}},t._l(t.steps,(function(t){return a("el-step",{key:t,attrs:{title:t}})})),1),a("el-card",{staticStyle:{margin:"30px"}},[a("FirstPage",{directives:[{name:"show",rawName:"v-show",value:0===t.active,expression:"active === 0"}],attrs:{"is-disab":t.isDisab,"part-opt":t.partOpt,"brand-list":t.brandList,"untreated-opt":t.untreatedOpt,"series-list":t.seriesList}}),a("SecondPage",{directives:[{name:"show",rawName:"v-show",value:1===t.active,expression:"active === 1"}],attrs:{"part-opt":t.partOpt,"untreated-opt":t.untreatedOpt}}),a("ThirdPage",{directives:[{name:"show",rawName:"v-show",value:2===t.active,expression:"active === 2"}],attrs:{"part-opt":t.partOpt,"product-list":t.productList,"untreated-opt":t.untreatedOpt}}),a("el-row",[a("el-col",{staticStyle:{"text-align":"center"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.active>0,expression:"active > 0"}],attrs:{type:"info",size:"small"},on:{click:function(e){t.active--}}},[t._v("上一步")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.active<2,expression:"active < 2"}],attrs:{type:"primary",size:"small"},on:{click:function(e){t.active++}}},[t._v("下一步")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:2===t.active,expression:"active === 2"}],attrs:{type:"success",size:"small"},on:{click:t.btnHandler}},[t._v("立即创建")])],1)],1)],1)],1)},r=[],n=(a("4160"),a("c975"),a("a15b"),a("d81d"),a("ac1f"),a("5319"),a("1276"),a("159b"),a("5530")),s=a("ef6c"),l=a("c4c8"),o=a("9add"),c=a("7d09"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{ref:"firstFormRef",attrs:{model:t.partOpt,"label-width":"80px"}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:t.partOpt.gname,callback:function(e){t.$set(t.partOpt,"gname",e)},expression:"partOpt.gname"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"品牌"}},[a("el-select",{attrs:{placeholder:"请选择商品分类"},model:{value:t.partOpt.brand_id,callback:function(e){t.$set(t.partOpt,"brand_id",e)},expression:"partOpt.brand_id"}},t._l(t.brandList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"原产地"}},[a("el-cascader",{attrs:{size:"large",options:t.cityOpts},model:{value:t.untreatedOpt.cityDetail,callback:function(e){t.$set(t.untreatedOpt,"cityDetail",e)},expression:"untreatedOpt.cityDetail"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商品编码"}},[a("el-input",{attrs:{placeholder:"请输入自定义的商品编码"},model:{value:t.untreatedOpt.pcode,callback:function(e){t.$set(t.untreatedOpt,"pcode",e)},expression:"untreatedOpt.pcode"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{attrs:{placeholder:"请输入自定义的搜索关键词，允许以、分隔"},model:{value:t.untreatedOpt.keywords,callback:function(e){t.$set(t.untreatedOpt,"keywords",e)},expression:"untreatedOpt.keywords"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商品描述"}},[a("el-input",{attrs:{placeholder:"请输入自定义的商品描述"},model:{value:t.partOpt.descr,callback:function(e){t.$set(t.partOpt,"descr",e)},expression:"partOpt.descr"}})],1)],1)],1),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"封面图片"}},[a("el-upload",{attrs:{action:"/api/leju/admin/material/uploadImg",multiple:"",limit:1,"on-success":t.uploadSuccess,"on-remove":t.removeImg,"on-exceed":t.exceedHandler,"file-list":t.untreatedOpt.coverImgList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1),a("el-col",{attrs:{span:12}},[a("img",{staticStyle:{width:"100px",height:"100px","vertical-align":"bottom"},attrs:{src:t.untreatedOpt.cover_img,alt:""}})])],1),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"是否上架"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.partOpt.isshow,callback:function(e){t.$set(t.partOpt,"isshow",e)},expression:"partOpt.isshow"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"是否最热"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.partOpt.ishot,callback:function(e){t.$set(t.partOpt,"ishot",e)},expression:"partOpt.ishot"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"是否最新"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.partOpt.isnew,callback:function(e){t.$set(t.partOpt,"isnew",e)},expression:"partOpt.isnew"}})],1)],1)],1),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"进价"}},[a("el-input-number",{attrs:{min:1},model:{value:t.partOpt.price_in,callback:function(e){t.$set(t.partOpt,"price_in",e)},expression:"partOpt.price_in"}}),t._v("(单位:分) ")],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"售价"}},[a("el-input-number",{attrs:{min:1},model:{value:t.partOpt.price_out,callback:function(e){t.$set(t.partOpt,"price_out",e)},expression:"partOpt.price_out"}}),t._v("(单位:分) ")],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"当前价格"}},[a("el-input-number",{attrs:{min:1},model:{value:t.partOpt.price_now,callback:function(e){t.$set(t.partOpt,"price_now",e)},expression:"partOpt.price_now"}}),t._v("(单位:分) ")],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"重量"}},[a("el-input-number",{attrs:{min:1},model:{value:t.partOpt.weight,callback:function(e){t.$set(t.partOpt,"weight",e)},expression:"partOpt.weight"}}),t._v("(单位:克) ")],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"排序"}},[a("el-input-number",{attrs:{min:1},model:{value:t.partOpt.sort,callback:function(e){t.$set(t.partOpt,"sort",e)},expression:"partOpt.sort"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"单位名称"}},[a("el-input",{attrs:{placeholder:"请输入商品单位名称，如公斤"},model:{value:t.partOpt.unit_name,callback:function(e){t.$set(t.partOpt,"unit_name",e)},expression:"partOpt.unit_name"}})],1)],1)],1),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商品分类"}},[a("el-checkbox-group",{model:{value:t.partOpt.kindIds,callback:function(e){t.$set(t.partOpt,"kindIds",e)},expression:"partOpt.kindIds"}},[a("el-checkbox",{attrs:{label:"灯具"}}),a("el-checkbox",{attrs:{label:"风格"}}),a("el-checkbox",{attrs:{label:"装饰品"}}),a("el-checkbox",{attrs:{label:"创意"}})],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"系列"}},[a("el-select",{attrs:{placeholder:"请选择商品系列"},model:{value:t.partOpt.seriesId,callback:function(e){t.$set(t.partOpt,"seriesId",e)},expression:"partOpt.seriesId"}},t._l(t.seriesList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"送货服务"}},[a("el-checkbox-group",{on:{change:t.checkboxChanged},model:{value:t.partOpt.service_promise,callback:function(e){t.$set(t.partOpt,"service_promise",e)},expression:"partOpt.service_promise"}},t._l(t.servicePromises,(function(e,i){return a("el-checkbox",{key:e.id,attrs:{disabled:t.isDisable===i,label:e.id}},[t._v(t._s(e.name))])})),1)],1)],1)],1)],1)},d=[],p=(a("a434"),a("a9e3"),a("49de")),m={name:"ProductAddnEditFirstPage",components:{},props:{partOpt:{type:Object,default:function(){return{}}},brandList:{type:Array,default:function(){return[]}},untreatedOpt:{type:Object,default:function(){return{}}},seriesList:{type:Array,default:function(){return[]}},isDisab:{type:Number,default:-1}},data:function(){return{cityOpts:s["regionData"],servicePromises:[{id:0,name:"无"},{id:1,name:"送货入户"},{id:2,name:"上门安装"}],isDisable:-1}},watch:{isDisab:function(t){this.isDisable=t}},methods:{exceedHandler:function(){this.$message.error("封面图片仅允许设置一张")},removeImg:function(t){var e,a;this.untreatedOpt.cover_img=void 0;var i={fileName:null===(e=t.response)||void 0===e?void 0:e.fileName,filePath:null===(a=t.response)||void 0===a?void 0:a.filePath};console.log(i),p["a"].delOssMaterial(i).then((function(t){return console.log(t)}))},uploadSuccess:function(t){"S"===t.code&&(this.untreatedOpt.cover_img=t.ossUrl)},checkboxChanged:function(t){if(t.indexOf(1)>-1||t.indexOf(2)>-1){this.isDisable=0;var e=t.indexOf(0);void 0!==e&&e>-1&&t.splice(e,1)}else this.isDisable=-1}}},f=m,h=a("2877"),b=Object(h["a"])(f,u,d,!1,null,"5526c13b",null),v=b.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{ref:"secondFormRef",attrs:{model:t.partOpt,"label-width":"100px"}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"详情标题"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.partOpt.detail_title,callback:function(e){t.$set(t.partOpt,"detail_title",e)},expression:"partOpt.detail_title"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"副标题"}},[a("el-input",{attrs:{placeholder:"请输入副标题"},model:{value:t.partOpt.detail_desc,callback:function(e){t.$set(t.partOpt,"detail_desc",e)},expression:"partOpt.detail_desc"}})],1)],1)],1),a("el-form-item",{attrs:{label:"添加sku"}},[t._v(" 颜色: "),t._l(t.untreatedOpt.skuList,(function(e,i){return a("span",{key:i,style:{color:e.color}},[t._v(t._s(e.color_text)+" ")])})),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入颜色描述"},model:{value:t.untreatedOpt.color_text,callback:function(e){t.$set(t.untreatedOpt,"color_text",e)},expression:"untreatedOpt.color_text"}})],1),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入十六进制颜色值"},model:{value:t.untreatedOpt.color,callback:function(e){t.$set(t.untreatedOpt,"color",e)},expression:"untreatedOpt.color"}})],1),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addColorData}},[t._v("创建")])],1)],1),a("el-table",{attrs:{data:t.untreatedOpt.skuList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{prop:"color_text",label:"颜色"}}),a("el-table-column",{attrs:{prop:"color",label:"色值"}}),a("el-table-column",{attrs:{prop:"color",label:"sku编码"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-input",{attrs:{placeholder:"请输入编码"},model:{value:e.row.sku_code,callback:function(a){t.$set(e.row,"sku_code",a)},expression:"scope.row.sku_code"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"color",label:"价格"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-input",{attrs:{placeholder:"请输入价格"},model:{value:e.row.price,callback:function(a){t.$set(e.row,"price",a)},expression:"scope.row.price"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"color",label:"库存"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-input",{attrs:{placeholder:"请输入库存"},model:{value:e.row.count,callback:function(a){t.$set(e.row,"count",a)},expression:"scope.row.count"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"color",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return t.delColor(e.$index)}}},[t._v("删除")])],1)]}}])})],1)],2),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"添加轮播图"}},[a("el-upload",{attrs:{action:"/api/leju/admin/material/uploadAndSaveImg","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handlePictureCardRemove,"on-success":t.handlePictureCardSuccess,"file-list":t.untreatedOpt.rotateImgList}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)],1)],1),a("el-form-item",{attrs:{label:"商品详情"}},[a("Tinymce",{model:{value:t.partOpt.content,callback:function(e){t.$set(t.partOpt,"content",e)},expression:"partOpt.content"}})],1)],1)},O=[],y=a("8256"),_={name:"ProductAddnEditSecondPage",components:{Tinymce:y["a"]},props:{partOpt:{type:Object,default:function(){return{}}},untreatedOpt:{type:Object,default:function(){return{}}}},data:function(){return{dialogImageUrl:"",dialogVisible:!1}},created:function(){},methods:{handlePictureCardSuccess:function(t,e,a){this.untreatedOpt.imgs=a},handlePictureCardRemove:function(t,e){var a,i={id:null===(a=t.response)||void 0===a?void 0:a.id};i.id&&p["a"].delMaterial(i).then((function(t){return console.log(t)}))},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},delColor:function(t){this.untreatedOpt.skuList.splice(t,1)},addColorData:function(){this.untreatedOpt.skuList.push({color_text:this.untreatedOpt.color_text,color:this.untreatedOpt.color}),console.log(this.untreatedOpt.skuList)}}},w=_,k=Object(h["a"])(w,g,O,!1,null,"2f78fed0",null),j=k.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{ref:"ThirdFormRef",attrs:{model:t.partOpt,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"添加关联产品"}},[a("el-transfer",{attrs:{data:t.productList},model:{value:t.untreatedOpt.link1,callback:function(e){t.$set(t.untreatedOpt,"link1",e)},expression:"untreatedOpt.link1"}})],1)],1)},L=[],C={name:"ProductAddnEditThirdPage",components:{},props:{partOpt:{type:Object,default:function(){return{}}},untreatedOpt:{type:Object,default:function(){return{}}},productList:{type:Array,default:function(){return[]}}},data:function(){return{}},created:function(){},methods:{}},S=C,$=Object(h["a"])(S,x,L,!1,null,"27521cea",null),P=$.exports,I={name:"ProductAddnEdit",components:{FirstPage:v,SecondPage:j,ThirdPage:P},data:function(){return{active:0,steps:["商品基本信息","添加库存信息","添加关联"],partOpt:{gname:"",brand_id:"",descr:"",isnew:0,ishot:0,isshow:0,unit_name:"",kindIds:[],seriesId:"",service_promise:[0],content:"",detail_title:"",detail_desc:""},cityOpts:s["regionData"],untreatedOpt:{cover_img:"",skuList:[],link1:[],imgs:[],cityDetail:[],pcode:"",keywords:"",coverImgList:[],rotateImgList:[]},seriesList:[],brandList:[],productList:[],isDisab:-1}},created:function(){this.checkEdit(),this.getSeriesList(),this.getBrandList(),this.getProductList()},methods:{checkEdit:function(){var t=this.partOpt.id=this.$route.params.id;t&&this.getProductDetail(t)},btnHandler:function(){var t,e=Object(n["a"])({},this.partOpt);this.untreatedOpt.cityDetail&&this.untreatedOpt.cityDetail.forEach((function(t,a){t=s["CodeToText"][t],e.origin_city&&(e.origin_area=t),!e.origin_city&&e.origin_province&&(e.origin_city=t),e.origin_province||(e.origin_province=t)}),e.origin_code=this.untreatedOpt.cityDetail.join(",")),this.untreatedOpt.pcode&&!this.partOpt.id&&(e.pcode=this.untreatedOpt.pcode+Date.now())||(e.pcode=this.untreatedOpt.pcode),this.untreatedOpt.keywords&&(e.keywords=this.untreatedOpt.keywords.replace(/[、\s]/g,"")),this.untreatedOpt.cover_img&&(e.cover_img=this.untreatedOpt.cover_img),(null===(t=this.untreatedOpt.imgs)||void 0===t?void 0:t.length)>0&&(e.imgs=this.untreatedOpt.imgs.map((function(t){var e;return(null===(e=t.response)||void 0===e?void 0:e.ossUrl)||t}))),this.untreatedOpt.skuList.length>0&&this.untreatedOpt.skuList.forEach((function(t,a){e["skuList["+a+"]"]=t})),this.untreatedOpt.link1.length>0&&(e.link1=this.untreatedOpt.link1.join(",")),e.service_promise=e.service_promise.length>=2?"3":null!=e.service_promise[0]?e.service_promise.join():0,this.saveOrUpdateProduct(e),console.log(this.untreatedOpt.cityDetail),console.log(e),console.log(JSON.stringify(e))},getProductList:function(){var t=this;l["a"].getProductList({limit:999}).then((function(e){var a=e.data;console.log(a),a.list.forEach((function(e){t.productList.push({key:e.id,label:e.gname})}))}))},getBrandList:function(){var t=this;o["a"].getAllBrandList().then((function(e){var a=e.data;a.forEach((function(e){t.brandList.push({value:e.id,label:e.cname})}))}))},getSeriesList:function(){var t=this;c["a"].getAllSeriesList().then((function(e){var a=e.data;a.forEach((function(e){t.seriesList.push({value:e.id,label:e.cname})}))}))},saveOrUpdateProduct:function(t){var e=this;l["a"].saveOrUpdateProduct(t).then((function(t){"success"===t.code&&(e.partOpt.id?(e.$message.success("更新成功！"),e.$router.go(-1)):e.$message.success("添加成功！"))}))},getProductDetail:function(t){var e=this;l["a"].getProductDetail({id:t}).then((function(t){var a,i,r=t.data;function n(t){for(var e in t)e in l.partOpt&&(this[e]=t[e])}function s(t){for(var e in t)e in l.untreatedOpt&&(this[e]=t[e])}var l=e,o=new n(r);console.log(r),o.kindIds="string"===typeof o.kindIds?o.kindIds.split(","):[],o.service_promise=3===o.service_promise?[1,2]:[o.service_promise];var c=o.service_promise.indexOf(0);void 0!==c&&c>-1&&(e.isDisab=-1)||(e.isDisab=0),e.partOpt=o,o=new s(r),o.link1=o.link1.split(","),o.cityDetail=null===(a=r.origin_code)||void 0===a?void 0:a.split(","),o.coverImgList=[{name:"1.jpg",url:e.untreatedOpt.cover_img}],o.imgs=null===(i=o.imgs)||void 0===i?void 0:i.split(","),o.rotateImgList=o.imgs&&o.imgs.map((function(t,e){return{name:"".concat(e+1,".jpg"),url:t,response:{ossUrl:t}}})),e.untreatedOpt=o}))}}},D=I,U=(a("ad25"),Object(h["a"])(D,i,r,!1,null,"22df50e2",null));e["default"]=U.exports},ad25:function(t,e,a){"use strict";var i=a("e937"),r=a.n(i);r.a},c4c8:function(t,e,a){"use strict";var i=a("0c6d"),r={getProductList:function(t){return Object(i["a"])({url:"/api/leju/admin/product/list",data:t})},switchCode:function(t){return Object(i["a"])({url:"/api/leju/admin/product/switchCode",data:t})},delProduct:function(t){return Object(i["a"])({url:"/api/leju/admin/product/delete",data:t})},getProductDetail:function(t){return Object(i["a"])({url:"/api/leju/admin/product/detail",data:t})},saveOrUpdateProduct:function(t){return Object(i["a"])({url:"/api/leju/admin/product/saveOrUpdate",method:"post",data:t})}};e["a"]=r},e791:function(t,e,a){"use strict";var i=a("eeb6"),r=a.n(i);r.a},e937:function(t,e,a){},eeb6:function(t,e,a){}}]);