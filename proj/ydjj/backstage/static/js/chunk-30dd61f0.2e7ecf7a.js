(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30dd61f0"],{"0c6d":function(e,t,r){"use strict";r("d3b7");var a=r("bc3a"),n=r.n(a),o=r("5c96"),l=r("4328"),i=r.n(l),c=n.a.create({baseURL:"http://www.bufantec.com",timeout:5e3});function s(e){var t,r={};return r.url=e.url,"post"===(null===(t=e.method)||void 0===t?void 0:t.toLowerCase())?(r.method="post",r.headers={},r.headers["Content-Type"]="application/x-www-form-urlencoded",r.data=i.a.stringify(e.data,{allowDots:!0,arrayFormat:"repeat"})):r.params=e.data,c(r)}c.interceptors.request.use((function(e){return e}),(function(e){return console.log(e),Promise.reject(e)})),c.interceptors.response.use((function(e){var t=e.data;return t}),(function(e){return console.log("err"+e),Object(o["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=s},4127:function(e,t,r){"use strict";var a=r("d233"),n=r("b313"),o={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Date.prototype.toISOString,i={delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,serializeDate:function(e){return l.call(e)},skipNulls:!1,strictNullHandling:!1},c=function e(t,r,n,o,l,c,s,u,d,f,p,b){var m=t;if("function"===typeof s)m=s(r,m);else if(m instanceof Date)m=f(m);else if(null===m){if(o)return c&&!b?c(r,i.encoder):r;m=""}if("string"===typeof m||"number"===typeof m||"boolean"===typeof m||a.isBuffer(m)){if(c){var y=b?r:c(r,i.encoder);return[p(y)+"="+p(c(m,i.encoder))]}return[p(r)+"="+p(String(m))]}var v,h=[];if("undefined"===typeof m)return h;if(Array.isArray(s))v=s;else{var D=Object.keys(m);v=u?D.sort(u):D}for(var g=0;g<v.length;++g){var k=v[g];l&&null===m[k]||(h=Array.isArray(m)?h.concat(e(m[k],n(r,k),n,o,l,c,s,u,d,f,p,b)):h.concat(e(m[k],r+(d?"."+k:"["+k+"]"),n,o,l,c,s,u,d,f,p,b)))}return h};e.exports=function(e,t){var r=e,l=t?a.assign({},t):{};if(null!==l.encoder&&void 0!==l.encoder&&"function"!==typeof l.encoder)throw new TypeError("Encoder has to be a function.");var s="undefined"===typeof l.delimiter?i.delimiter:l.delimiter,u="boolean"===typeof l.strictNullHandling?l.strictNullHandling:i.strictNullHandling,d="boolean"===typeof l.skipNulls?l.skipNulls:i.skipNulls,f="boolean"===typeof l.encode?l.encode:i.encode,p="function"===typeof l.encoder?l.encoder:i.encoder,b="function"===typeof l.sort?l.sort:null,m="undefined"!==typeof l.allowDots&&l.allowDots,y="function"===typeof l.serializeDate?l.serializeDate:i.serializeDate,v="boolean"===typeof l.encodeValuesOnly?l.encodeValuesOnly:i.encodeValuesOnly;if("undefined"===typeof l.format)l.format=n["default"];else if(!Object.prototype.hasOwnProperty.call(n.formatters,l.format))throw new TypeError("Unknown format option provided.");var h,D,g=n.formatters[l.format];"function"===typeof l.filter?(D=l.filter,r=D("",r)):Array.isArray(l.filter)&&(D=l.filter,h=D);var k,O=[];if("object"!==typeof r||null===r)return"";k=l.arrayFormat in o?l.arrayFormat:"indices"in l?l.indices?"indices":"repeat":"indices";var j=o[k];h||(h=Object.keys(r)),b&&h.sort(b);for(var x=0;x<h.length;++x){var w=h[x];d&&null===r[w]||(O=O.concat(c(r[w],w,j,u,d,f?p:null,D,b,m,y,g,v)))}var _=O.join(s),R=!0===l.addQueryPrefix?"?":"";return _.length>0?R+_:""}},"42ce":function(e,t,r){"use strict";var a=r("0c6d"),n={getRefundList:function(e){return Object(a["a"])({url:"/api/leju/admin/orderBack/list",data:e})},getRefundDetail:function(e){return Object(a["a"])({url:"/api/leju/admin/orderBack/detail",data:e})},agreeRefund:function(e){return Object(a["a"])({url:"/api/leju/admin/orderBack/agreeBack",method:"post",data:e})},rejectRefund:function(e){return Object(a["a"])({url:"/api/leju/admin/orderBack/rejectBack",method:"post",data:e})},completeRefund:function(e){return Object(a["a"])({url:"/api/leju/admin/orderBack/backDone",method:"post",data:e})},closeRefund:function(e){return Object(a["a"])({url:"/api/leju/admin/orderBack/closeOrder",method:"post",data:e})}};t["a"]=n},4328:function(e,t,r){"use strict";var a=r("4127"),n=r("9e6a"),o=r("b313");e.exports={formats:o,parse:n,stringify:a}},"759b":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"order-refunddetail-main"},[r("el-button",{staticStyle:{margin:"30px 30px 0","font-size":"20px"},attrs:{type:"text"},on:{click:e.goBack}},[r("i",{staticClass:"el-icon-back"}),e._v(" 返回")]),r("el-card",{staticStyle:{margin:"30px"}},[r("div",{attrs:{slot:"header"},slot:"header"},[r("span",[e._v("退货商品")])]),r("el-table",{attrs:{data:e.refundData.product,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index",label:"#",align:"center"}}),e._l(e.productMap,(function(t){return r("el-table-column",{key:t.label,attrs:{prop:"object"===typeof t.prop?"":t.prop,label:t.label,align:"center"},scopedSlots:e._u(["cover_img"===t.prop?{key:"default",fn:function(e){return[r("img",{staticStyle:{width:"100px",height:"100px","vertical-align":"bottom"},attrs:{src:e.row.cover_img?e.row.cover_img:"",alt:""}})]}}:"品牌"===t.label?{key:"default",fn:function(a){return[a.row[t.prop[0]]?r("p",[e._v(" "+e._s(a.row[t.prop[0]])+" | "+e._s(a.row[t.prop[1]])+" ")]):r("p",[e._v("无")])]}}:"价格货号"===t.label?{key:"default",fn:function(a){return[r("p",[e._v(" 价格：￥"+e._s(a.row[t.prop[0]])+" ")]),r("p",[e._v(" 货号："+e._s(a.row[t.prop[1]])+" ")])]}}:"数量"===t.label?{key:"default",fn:function(t){return[e._v(" "+e._s(e.refundData.count)+" ")]}}:"小计"===t.label?{key:"default",fn:function(t){return[e._v(" ￥"+e._s((t.row.sku_price*e.refundData.count).toFixed(2))+" ")]}}:null],null,!0)})}))],2),r("h2",[e._v("订单信息:")]),r("el-form",{attrs:{model:e.refundData,"label-width":"80px",disabled:""}},[r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"退单单号:"}},[r("el-input",{model:{value:e.refundData.id,callback:function(t){e.$set(e.refundData,"id",t)},expression:"refundData.id"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"当前状态:"}},[r("el-input",{model:{value:e.refundData.processText,callback:function(t){e.$set(e.refundData,"processText",t)},expression:"refundData.processText"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"是否关闭:"}},[r("el-input",{model:{value:e.refundData.statusend,callback:function(t){e.$set(e.refundData,"statusend",t)},expression:"refundData.statusend"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"订单编号:"}},[r("el-input",{model:{value:e.refundData.orderId,callback:function(t){e.$set(e.refundData,"orderId",t)},expression:"refundData.orderId"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"申请时间:"}},[r("el-input",{model:{value:e.refundData.addtime,callback:function(t){e.$set(e.refundData,"addtime",t)},expression:"refundData.addtime"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"用户账号:"}},[r("el-input",{model:{value:e.refundData.username,callback:function(t){e.$set(e.refundData,"username",t)},expression:"refundData.username"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"退单理由:"}},[r("el-input",{model:{value:e.refundData.reason,callback:function(t){e.$set(e.refundData,"reason",t)},expression:"refundData.reason"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"联系人:"}},[r("el-input",{model:{value:e.refundData.sendUser,callback:function(t){e.$set(e.refundData,"sendUser",t)},expression:"refundData.sendUser"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"联系电话:"}},[r("el-input",{model:{value:e.refundData.tel,callback:function(t){e.$set(e.refundData,"tel",t)},expression:"refundData.tel"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"收货地址:"}},[r("el-input",{model:{value:e.refundData.cityStr,callback:function(t){e.$set(e.refundData,"cityStr",t)},expression:"refundData.cityStr"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"邮编:"}},[r("el-input",{model:{value:e.refundData.cityCode,callback:function(t){e.$set(e.refundData,"cityCode",t)},expression:"refundData.cityCode"}})],1)],1),r("el-col",{attrs:{span:16}},[r("el-form-item",{attrs:{label:"详细地址:"}},[r("el-input",{model:{value:e.refundData.cityBak,callback:function(t){e.$set(e.refundData,"cityBak",t)},expression:"refundData.cityBak"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"订单金额:"}},[r("el-input",{model:{value:e.refundData.order_price,callback:function(t){e.$set(e.refundData,"order_price",t)},expression:"refundData.order_price"}})],1)],1)],1)],1),r("el-form",{attrs:{model:e.refundOpt,"label-width":"80px"}},[r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"退款金额:"}},[r("el-input-number",{attrs:{disabled:0!==~~e.refundData.process,min:0},model:{value:e.refundOpt.back_price,callback:function(t){e.$set(e.refundOpt,"back_price",t)},expression:"refundOpt.back_price"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"备注信息:"}},[r("el-input",{attrs:{disabled:!(0===~~e.refundData.process)},model:{value:e.refundOpt.bak,callback:function(t){e.$set(e.refundOpt,"bak",t)},expression:"refundOpt.bak"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"完成备注:"}},[r("el-input",{attrs:{disabled:!(1===~~e.refundData.process),placeholder:"退货完成后关闭订单的备注信息"},model:{value:e.refundData.endbak,callback:function(t){e.$set(e.refundData,"endbak",t)},expression:"refundData.endbak"}})],1)],1),r("el-col",{attrs:{span:24}},["已关闭"!==e.refundData.statusend?r("el-form-item",{attrs:{label:"处理备注:"}},[r("el-input",{attrs:{disabled:!("9"===e.refundData.process)||"已关闭"===e.refundData.statusend},model:{value:e.refundData.handlebak,callback:function(t){e.$set(e.refundData,"handlebak",t)},expression:"refundData.handlebak"}})],1):e._e()],1),r("el-col",{attrs:{span:16}},[r("el-form-item",{attrs:{label:"处理时间:"}},[r("el-input",{attrs:{disabled:""},model:{value:e.refundData.handletime,callback:function(t){e.$set(e.refundData,"handletime",t)},expression:"refundData.handletime"}})],1)],1),r("el-col",{attrs:{span:16}},[r("el-form-item",{attrs:{label:"关闭时间:"}},[r("el-input",{attrs:{disabled:""},model:{value:e.refundData.endtime,callback:function(t){e.$set(e.refundData,"endtime",t)},expression:"refundData.endtime"}})],1)],1)],1)],1),r("el-row",{staticStyle:{"margin-top":"30px"},attrs:{type:"flex",justify:"center"}},[r("el-col",{staticStyle:{"text-align":"center"},attrs:{span:6}},[e.isClose?["0"!==e.refundData.status&&"9"!==e.refundData.process||"已关闭"===e.refundData.statusend?r("el-button",{attrs:{type:"success"}},[e._v("订单已关闭")]):r("el-button",{attrs:{type:"primary"},on:{click:e.closeHandler}},[e._v("关闭订单")])]:[0===~~e.refundData.process?[r("el-button",{attrs:{type:"danger"},on:{click:e.rejectHandler}},[e._v("拒绝退货")]),r("el-button",{attrs:{type:"primary"},on:{click:e.agreeHandler}},[e._v("同意退货")])]:1===~~e.refundData.process?[r("el-button",{attrs:{type:"primary"},on:{click:e.agreeRefundHandler}},[e._v("同意退款")])]:["0"===e.refundData.status||"9"===e.refundData.process?r("el-button",{attrs:{type:"primary"},on:{click:e.closeHandler}},[e._v("关闭订单")]):e._e()]]],2)],1)],1)],1)},n=[],o=r("5530"),l=r("42ce"),i={name:"OrderRefundDetail",components:{},data:function(){return{refundData:{},productMap:[{label:"商品图片",prop:"cover_img"},{label:"商品名称",prop:"gname"},{label:"品牌",prop:["brandName","brandEname"]},{label:"价格货号",prop:["sku_price","sku_code"]},{label:"类型",prop:"color_text"},{label:"数量"},{label:"小计"}],refundOpt:{id:"",bak:"",back_price:""},isClose:!1}},computed:{refundProcess:function(){var e={0:"等待处理",1:"等待收货",2:"已退款",9:"拒绝退货"};return e[~~this.refundData.process]}},created:function(){console.log(),this.refundOpt.id=this.$route.params.id,this.getRefundDetail()},methods:{closeHandler:function(){var e={id:this.refundOpt.id,bak:this.refundData.handlebak};this.closeRefund(e)},agreeRefundHandler:function(){var e={id:this.refundOpt.id,bak:this.refundData.endbak};this.completeRefund(e)},rejectHandler:function(){var e={id:this.refundOpt.id,bak:this.refundOpt.bak};this.rejectRefund(e)},agreeHandler:function(){var e=Object(o["a"])({},this.refundOpt);this.agreeRefund(e)},goBack:function(){this.$router.go(-1)},getRefundDetail:function(){var e=this,t=this.refundOpt.id;l["a"].getRefundDetail({id:t}).then((function(t){var r=t.data,a={0:"等待处理",1:"确认退货,等待收货",2:"确认收货,已退款",9:"拒绝退货"};r.back_price&&(r.back_price/=100),r.order_price/=100,r.product.p_price/=100,r.product.sku_price/=100,r.product=[r.product],r.back_price||0===r.back_price?e.refundOpt.back_price=r.back_price:e.refundOpt.back_price=r.order_price,"9"===r.process&&(e.refundOpt.back_price=0),e.refundOpt.bak=r.handlebak,r.handlebak="",e.refundData=r,console.log(r),e.isClose=!("0"===r.statusend),console.log(e.isClose),e.refundData.statusend=0===~~e.refundData.statusend?"正在进行":"已关闭",e.refundData.processText=a[~~e.refundData.process]}))},agreeRefund:function(e){var t=this;l["a"].agreeRefund(e).then((function(e){t.getRefundDetail()}))},rejectRefund:function(e){var t=this;l["a"].rejectRefund(e).then((function(e){t.getRefundDetail()}))},completeRefund:function(e){var t=this;l["a"].completeRefund(e).then((function(e){console.log(e),t.getRefundDetail()}))},closeRefund:function(e){var t=this;l["a"].closeRefund(e).then((function(e){console.log(e),t.getRefundDetail()}))}}},c=i,s=(r("b4ed"),r("2877")),u=Object(s["a"])(c,a,n,!1,null,"0adeb273",null);t["default"]=u.exports},"7ecc":function(e,t,r){},"9e6a":function(e,t,r){"use strict";var a=r("d233"),n=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:a.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},l=function(e,t){for(var r={},a=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,l=t.parameterLimit===1/0?void 0:t.parameterLimit,i=a.split(t.delimiter,l),c=0;c<i.length;++c){var s,u,d=i[c],f=d.indexOf("]="),p=-1===f?d.indexOf("="):f+1;-1===p?(s=t.decoder(d,o.decoder),u=t.strictNullHandling?null:""):(s=t.decoder(d.slice(0,p),o.decoder),u=t.decoder(d.slice(p+1),o.decoder)),n.call(r,s)?r[s]=[].concat(r[s]).concat(u):r[s]=u}return r},i=function(e,t,r){for(var a=t,n=e.length-1;n>=0;--n){var o,l=e[n];if("[]"===l)o=[],o=o.concat(a);else{o=r.plainObjects?Object.create(null):{};var i="["===l.charAt(0)&&"]"===l.charAt(l.length-1)?l.slice(1,-1):l,c=parseInt(i,10);!isNaN(c)&&l!==i&&String(c)===i&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(o=[],o[c]=a):o[i]=a}a=o}return a},c=function(e,t,r){if(e){var a=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g,c=o.exec(a),s=c?a.slice(0,c.index):a,u=[];if(s){if(!r.plainObjects&&n.call(Object.prototype,s)&&!r.allowPrototypes)return;u.push(s)}var d=0;while(null!==(c=l.exec(a))&&d<r.depth){if(d+=1,!r.plainObjects&&n.call(Object.prototype,c[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(c[1])}return c&&u.push("["+a.slice(c.index)+"]"),i(u,t,r)}};e.exports=function(e,t){var r=t?a.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!==typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"===typeof r.delimiter||a.isRegExp(r.delimiter)?r.delimiter:o.delimiter,r.depth="number"===typeof r.depth?r.depth:o.depth,r.arrayLimit="number"===typeof r.arrayLimit?r.arrayLimit:o.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"===typeof r.decoder?r.decoder:o.decoder,r.allowDots="boolean"===typeof r.allowDots?r.allowDots:o.allowDots,r.plainObjects="boolean"===typeof r.plainObjects?r.plainObjects:o.plainObjects,r.allowPrototypes="boolean"===typeof r.allowPrototypes?r.allowPrototypes:o.allowPrototypes,r.parameterLimit="number"===typeof r.parameterLimit?r.parameterLimit:o.parameterLimit,r.strictNullHandling="boolean"===typeof r.strictNullHandling?r.strictNullHandling:o.strictNullHandling,""===e||null===e||"undefined"===typeof e)return r.plainObjects?Object.create(null):{};for(var n="string"===typeof e?l(e,r):e,i=r.plainObjects?Object.create(null):{},s=Object.keys(n),u=0;u<s.length;++u){var d=s[u],f=c(d,n[d],r);i=a.merge(i,f,r)}return a.compact(i)}},b313:function(e,t,r){"use strict";var a=String.prototype.replace,n=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return a.call(e,n,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},b4ed:function(e,t,r){"use strict";var a=r("7ecc"),n=r.n(a);n.a},d233:function(e,t,r){"use strict";var a=Object.prototype.hasOwnProperty,n=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e){var t;while(e.length){var r=e.pop();if(t=r.obj[r.prop],Array.isArray(t)){for(var a=[],n=0;n<t.length;++n)"undefined"!==typeof t[n]&&a.push(t[n]);r.obj[r.prop]=a}}return t},l=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},a=0;a<e.length;++a)"undefined"!==typeof e[a]&&(r[a]=e[a]);return r},i=function e(t,r,n){if(!r)return t;if("object"!==typeof r){if(Array.isArray(t))t.push(r);else{if("object"!==typeof t)return[t,r];(n.plainObjects||n.allowPrototypes||!a.call(Object.prototype,r))&&(t[r]=!0)}return t}if("object"!==typeof t)return[t].concat(r);var o=t;return Array.isArray(t)&&!Array.isArray(r)&&(o=l(t,n)),Array.isArray(t)&&Array.isArray(r)?(r.forEach((function(r,o){a.call(t,o)?t[o]&&"object"===typeof t[o]?t[o]=e(t[o],r,n):t.push(r):t[o]=r})),t):Object.keys(r).reduce((function(t,o){var l=r[o];return a.call(t,o)?t[o]=e(t[o],l,n):t[o]=l,t}),o)},c=function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},s=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},u=function(e){if(0===e.length)return e;for(var t="string"===typeof e?e:String(e),r="",a=0;a<t.length;++a){var o=t.charCodeAt(a);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?r+=t.charAt(a):o<128?r+=n[o]:o<2048?r+=n[192|o>>6]+n[128|63&o]:o<55296||o>=57344?r+=n[224|o>>12]+n[128|o>>6&63]+n[128|63&o]:(a+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(a)),r+=n[240|o>>18]+n[128|o>>12&63]+n[128|o>>6&63]+n[128|63&o])}return r},d=function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],a=0;a<t.length;++a)for(var n=t[a],l=n.obj[n.prop],i=Object.keys(l),c=0;c<i.length;++c){var s=i[c],u=l[s];"object"===typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:l,prop:s}),r.push(u))}return o(t)},f=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},p=function(e){return null!==e&&"undefined"!==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))};e.exports={arrayToObject:l,assign:c,compact:d,decode:s,encode:u,isBuffer:p,isRegExp:f,merge:i}}}]);