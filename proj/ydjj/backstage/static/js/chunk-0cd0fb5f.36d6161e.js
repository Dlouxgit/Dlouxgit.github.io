(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cd0fb5f"],{"0c6d":function(t,e,i){"use strict";i("d3b7");var n=i("bc3a"),a=i.n(n),o=i("5c96"),r=i("4328"),l=i.n(r),s=a.a.create({baseURL:"https://bufan.cloud",timeout:5e3});function c(t){var e,i={};return i.url=t.url,"post"===(null===(e=t.method)||void 0===e?void 0:e.toLowerCase())?(i.method="post",i.headers={},i.headers["Content-Type"]="application/x-www-form-urlencoded",i.data=l.a.stringify(t.data,{allowDots:!0,arrayFormat:"repeat"})):i.params=t.data,s(i)}s.interceptors.request.use((function(t){return t}),(function(t){return console.log(t),Promise.reject(t)})),s.interceptors.response.use((function(t){var e=t.data;return e}),(function(t){return console.log("err"+t),Object(o["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)})),e["a"]=c},2423:function(t,e,i){"use strict";var n=i("0c6d"),a={getArticleList:function(t){return Object(n["a"])({url:"/api/leju/admin/article/list",data:t})},delArticle:function(t){return Object(n["a"])({url:"/api/leju/admin/article/del",data:t})},getArticleDetail:function(t){return Object(n["a"])({url:"/api/leju/admin/article/detail",data:t})},saveOrUpdateArticle:function(t){return Object(n["a"])({url:"/api/leju/admin/article/saveOrUpdate",method:"post",data:t})}};e["a"]=a},"26f4":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"material-addneditarticle-main"},[i("el-card",{staticStyle:{margin:"30px"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"text",icon:"el-icon-arrow-left"},on:{click:t.goBack}},[t._v("返回")])],1),i("el-form",{ref:"addnEditFormRef",attrs:{model:t.addnEditOpt,"label-width":"80px"}},[i("el-row",{attrs:{gutter:30}},[i("el-col",{attrs:{span:7}},[i("el-form-item",{attrs:{label:"标题"}},[i("el-input",{model:{value:t.addnEditOpt.title,callback:function(e){t.$set(t.addnEditOpt,"title",e)},expression:"addnEditOpt.title"}})],1)],1),i("el-col",{attrs:{span:7}},[i("el-form-item",{attrs:{label:"作者"}},[i("el-input",{model:{value:t.addnEditOpt.author,callback:function(e){t.$set(t.addnEditOpt,"author",e)},expression:"addnEditOpt.author"}})],1)],1),i("el-col",{attrs:{span:7}},[i("el-form-item",{attrs:{label:"价格"}},[i("el-input",{model:{value:t.addnEditOpt.price,callback:function(e){t.$set(t.addnEditOpt,"price",e)},expression:"addnEditOpt.price"}})],1)],1),i("el-col",{attrs:{span:7}},[i("el-form-item",{attrs:{label:"颜色"}},[i("el-row",{attrs:{gutter:30}},[i("el-col",{attrs:{span:6}},[i("el-color-picker",{model:{value:t.addnEditOpt.color1,callback:function(e){t.$set(t.addnEditOpt,"color1",e)},expression:"addnEditOpt.color1"}})],1),i("el-col",{attrs:{span:6}},[i("el-color-picker",{model:{value:t.addnEditOpt.color2,callback:function(e){t.$set(t.addnEditOpt,"color2",e)},expression:"addnEditOpt.color2"}})],1),i("el-col",{attrs:{span:6}},[i("el-color-picker",{model:{value:t.addnEditOpt.color3,callback:function(e){t.$set(t.addnEditOpt,"color3",e)},expression:"addnEditOpt.color3"}})],1)],1)],1)],1),i("el-col",[i("el-form-item",{attrs:{label:"商品分类"}},[i("el-checkbox-group",{model:{value:t.addnEditOpt.kindIds,callback:function(e){t.$set(t.addnEditOpt,"kindIds",e)},expression:"addnEditOpt.kindIds"}},t._l(t.kindList,(function(e){return i("el-checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.label))])})),1)],1)],1),i("el-col",[i("el-form-item",{attrs:{label:"商品分类"}},[i("el-upload",{attrs:{action:"/api/leju/admin/material/uploadAndSaveImg","on-success":t.imgSuccessHandler,limit:1,"file-list":t.fileList,"on-remove":t.imgRemoveHandler,"on-exceed":t.imgExceedHandler}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[i("p",[t._v("只能上传jpg/png文件，且不超过500kb")]),i("img",{staticStyle:{width:"100px",height:"100px","vertical-align":"center"},attrs:{src:t.imgSrc,alt:""}})])],1)],1)],1),i("el-col",[i("el-form-item",{attrs:{label:"文章内容"}},[i("Tinymce",{ref:"TinymceRef",model:{value:t.addnEditOpt.content2,callback:function(e){t.$set(t.addnEditOpt,"content2",e)},expression:"addnEditOpt.content2"}})],1)],1)],1),i("el-form-item",{attrs:{align:"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("立即创建")])],1)],1)],1)],1)},a=[],o=(i("d81d"),i("d3b7"),i("8256")),r=i("a169"),l=i("2423"),s={name:"MaterialAddnEditArticle",components:{Tinymce:o["a"]},data:function(){return{addnEditOpt:{color1:"#5e72e4",color2:"#f16514",color3:"#cc0001",kindIds:[]},kindList:[],fileList:[],imgSrc:"",throttle:!0}},created:function(){this.checkEdit(),this.getKindList()},methods:{goBack:function(){this.$router.go(-1)},checkEdit:function(){var t=this.$route.params.id;t&&this.getArticleDetail(t)},imgExceedHandler:function(){this.$message.info("封面图片仅允许设置一张")},imgRemoveHandler:function(t,e){this.fileList=e,this.imgSrc="",this.addnEditOpt.coverImg="",console.log(t)},imgSuccessHandler:function(t){this.imgSrc=t.ossUrl,this.addnEditOpt.coverImg=t.ossUrl},onSubmit:function(){this.addnEditOpt.content1=this.$refs.TinymceRef.getContent({format:"text"}),this.throttle?this.saveOrUpdateArticle():this.$message.warning("正在等待网络······")},getKindList:function(){var t=this;r["a"].getKindList().then((function(e){var i=e.data;t.kindList=i.map((function(t){return{label:t.ctitle,id:t.id}}))}))},getArticleDetail:function(t){var e=this;l["a"].getArticleDetail({id:t}).then((function(t){var i=t.data;console.log(i),e.addnEditOpt=i,e.imgSrc=i.coverImg,e.fileList=i.coverImg?[{name:"1.jpg",url:i.coverImg,response:{ossUrl:i.coverImg}}]:[]}))},saveOrUpdateArticle:function(){var t=this;this.throttle=!1;var e=this.addnEditOpt;l["a"].saveOrUpdateArticle(e).then((function(e){console.log(e),t.$message.success(t.$route.id?"更新成功":"添加成功"),t.$router.go(-1)})).finally((function(){t.throttle=!0}))}}},c=s,d=(i("6c1d"),i("2877")),u=Object(d["a"])(c,n,a,!1,null,"692d0a22",null);e["default"]=u.exports},"5cf7":function(t,e,i){"use strict";var n=i("7542"),a=i.n(n);a.a},"6c1d":function(t,e,i){"use strict";var n=i("a396"),a=i.n(n);a.a},7542:function(t,e,i){},8256:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tinymce-container",class:{fullscreen:t.fullscreen},style:{width:t.containerWidth}},[i("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),t._v(" "),i("div",{staticClass:"editor-custom-btn-container"},[i("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:t.imageSuccessCBK}})],1)])},a=[],o=(i("4160"),i("a9e3"),i("b680"),i("159b"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(" upload ")]),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v(" Click upload ")])],1),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(" Cancel ")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(" Confirm ")])],1)],1)}),r=[],l=(i("a623"),i("d81d"),i("b64b"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return Object.keys(this.listObj).every((function(e){return t.listObj[e].hasSuccess}))},handleSubmit:function(){var t=this,e=Object.keys(this.listObj).map((function(e){return t.listObj[e]}));this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(t,e){for(var i=e.uid,n=Object.keys(this.listObj),a=0,o=n.length;a<o;a++)if(this.listObj[n[a]].uid===i)return this.listObj[n[a]].url=t.files.file,void(this.listObj[n[a]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,i=Object.keys(this.listObj),n=0,a=i.length;n<a;n++)if(this.listObj[i[n]].uid===e)return void delete this.listObj[i[n]]},beforeUpload:function(t){var e=this,i=window.URL||window.webkitURL,n=t.uid;return this.listObj[n]={},new Promise((function(a,o){var r=new Image;r.src=i.createObjectURL(t),r.onload=function(){e.listObj[n]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},a(!0)}))}}}),s=l,c=(i("e791"),i("2877")),d=Object(c["a"])(s,o,r,!1,null,"30ea5378",null),u=d.exports,m=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],p=m,h=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],f=h,b=i("b85c"),g=[];function v(){return window.tinymce}var y=function(t,e){var i=document.getElementById(t),n=e||function(){};if(!i){var a=document.createElement("script");a.src=t,a.id=t,document.body.appendChild(a),g.push(n);var o="onload"in a?r:l;o(a)}function r(e){e.onload=function(){this.onerror=this.onload=null;var t,i=Object(b["a"])(g);try{for(i.s();!(t=i.n()).done;){var n=t.value;n(null,e)}}catch(a){i.e(a)}finally{i.f()}g=null},e.onerror=function(){this.onerror=this.onload=null,n(new Error("Failed to load "+t),e)}}function l(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e,i=Object(b["a"])(g);try{for(i.s();!(e=i.n()).done;){var n=e.value;n(null,t)}}catch(a){i.e(a)}finally{i.f()}g=null}}}i&&n&&(v()?n(null,i):g.push(n))},O=y,k="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",w={name:"Tinymce",components:{editorImage:u},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(e.tinymceId).setContent(t||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var t=this;O(k,(function(e){e?t.$message.error(e.message):t.initTinymce()}))},initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:f,menubar:this.menubar,plugins:p,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",(function(){t.hasChange=!0,t.$emit("input",i.getContent())}))},setup:function(t){t.on("FullscreenStateChanged",(function(t){e.fullscreen=t.state}))},convert_urls:!1})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(t){var e=t;return e?window.tinymce.get(this.tinymceId).getContent(e):window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach((function(t){return window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'.concat(t.url,'" >'))}))}}},j=w,_=(i("5cf7"),Object(c["a"])(j,n,a,!1,null,"19aa6e6f",null));e["a"]=_.exports},a169:function(t,e,i){"use strict";var n=i("0c6d"),a={getKindList:function(t){return Object(n["a"])({url:"/api/leju/admin/kind/list",data:t})},saveOrUpdateKind:function(t){return Object(n["a"])({url:"/api/leju/admin/kind/saveOrUpdate",method:"post",data:t})},delKind:function(t){return Object(n["a"])({url:"/api/leju/admin/kind/del",data:t})}};e["a"]=a},a396:function(t,e,i){},e791:function(t,e,i){"use strict";var n=i("eeb6"),a=i.n(n);a.a},eeb6:function(t,e,i){}}]);