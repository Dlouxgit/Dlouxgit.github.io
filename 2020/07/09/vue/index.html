<!DOCTYPE html>




<html class="theme-next pisces" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
    
  
  <link href="https://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css" />







  

<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet" type="text/css" />



  

<link href="https://cdn.bootcss.com/social-share.js/1.0.9/css/share.min.css" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.0.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=0.0.4">



  <link rel="mask-icon" href="/images/logo.svg?v=0.0.4" color="#222">





  <meta name="keywords" content="Vue," />










<meta name="description" content="Vue.js">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue">
<meta property="og:url" content="https://dloux.gitee.io/2020/07/09/vue/index.html">
<meta property="og:site_name" content="Dloux">
<meta property="og:description" content="Vue.js">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-07-09T11:17:25.000Z">
<meta property="article:modified_time" content="2020-09-01T07:50:45.875Z">
<meta property="article:author" content="Dloux">
<meta property="article:tag" content="Vue">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '0.0.4',
    sidebar: {"position":"right","display":"always","offset":52,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    since: '6/2/2020 11:30:00',
    onlineAPI: '',
    site: {
      title: 'Dloux',
      subtitle: '',
      author: 'Dloux'
    },
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    leancloud: {
      enable: false,
      appID: '',
      appKey: ''
    },
    favicon: {
      visibilitychange: true,
      narmal: '',
      hidden: '/images/failure.ico',
      show_text: '(/≧▽≦/)咦！又好了！',
      hide_text: '(●—●)喔哟，崩溃啦！'
    }
  };
</script>



  
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/2.1.3/jquery.min.js"></script>




  <link rel="canonical" href="https://dloux.gitee.io/2020/07/09/vue/"/>





  <title>Vue | Dloux</title>
  








<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-主页">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            主页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-实验室">
          <a href="/proj" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-magic"></i> <br />
            
            实验室
          </a>
        </li>
      
        
        <li class="menu-item menu-item-归档">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-关于我">
          <a href="/proj/cv/resume.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            关于我
          </a>
        </li>
      
        
        <li class="menu-item menu-item-吃个饭">
          <a href="/proj/meal/index.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            吃个饭
          </a>
        </li>
      

      
      <li class="menu-item search">
          <form class="search-form">
            <input name="keyword" type="text" class="search-input" placeholder="站内搜索">
            <button type="submit" class="search-submit"><i class="fa fa-search"></i></button>
          </form>
      </li>
      <li class="menu-item online"><span id="online-count">?</span>人在线</li>
    </ul>
  

  
</nav>

<div class="site-brand-wrapper" style="background-image: url(/images/header-cat.jpg)">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <div class="brand">
        <span class="logo-line-before"><i></i></span>
        <div class="site-title">
          <div id="animate" class="animate">
            <span>D</span><span>l</span><span>o</span><span>u</span><span>x</span>
          </div>
          <div id="guide" class="guide">
            <span>D</span><span>l</span><span>o</span><span>u</span><span>x</span>
          </div>
        </div>
        <span class="logo-line-after"><i></i></span>
      </div>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>
<div class="site-master" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-master-avatar" itemprop="image" src="/images/dloux.jpg" alt="Dloux" />
    <h2 class="site-master-description" itemprop="description">
        catch fish with the hands
    </h2>
</div>


 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-date">
			<div class="post-month">07月</div>
			<div class="post-day">09</div>
	</div>
  

  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dloux.gitee.io/2020/07/09/vue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dloux">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/dloux.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dloux">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Vue</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-09T19:17:25+08:00">
                2020-07-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Vue-js"><a href="#Vue-js" class="headerlink" title="Vue.js"></a>Vue.js<a id="more"></a></h1><p>是一个渐进式框架，意味着你可以把 Vue 作为你应用的一部分嵌入到其中。通俗点举例，比如公司正在用 jQuery，但这时候需要项目重构，你可以从新项目开始使用 Vue，然后再一点一点地替换掉其他的项目，一点点地替换，就是渐进。</p>
<h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><p><strong>(注意，操作与指令都必须在 Vue 挂载的元素内)，全文代码基本是伪代码</strong></p>
<h3 id="插值表达式-mustache"><a href="#插值表达式-mustache" class="headerlink" title="插值表达式 mustache"></a>插值表达式 mustache</h3><p>mustache  翻译过来就是胡子, 为什么 <code>{{}}</code> 叫 mustache,  看这个图 <code>:{</code> 就懂了吧。</p>
<p>用 <code></code>可以获取到 Vue 实例的 data 属性中的 msg 值，只能在标签内使用，如 <code>&lt;div&gt;&lt;/div&gt;</code></p>
<p>当 data 中的 msg 值被改变时，对应的 <code></code> 渲染出来的值也会发生改变，即数据是响应式的。</p>
<p><code> {{}}</code> 内部可以写表达式，如三元表达式，但不能写语句，如 if 、 for 语句</p>
<p>题外： 与 mustache 命名类似的还有 toast（吐司），它经常在各种 UI 库中见到，它表示轻弹窗，就像烤面包时候的烟一样，冒出来一会儿就消失，所以得名 toast。</p>
<h3 id="基本指令"><a href="#基本指令" class="headerlink" title="基本指令"></a>基本指令</h3><h4 id="v-once"><a href="#v-once" class="headerlink" title="v-once"></a>v-once</h4><p><code>v-once</code> 元素只在第一次加载的时候去获取 data 中的数据，如 <code>&lt;div v-once&gt;&lt;/div&gt;</code> 只会在第一次渲染的时候把 data.msg 的值渲染到页面上，之后再修改 data.msg 是不会发生改变的。</p>
<h4 id="v-for"><a href="#v-for" class="headerlink" title="v-for"></a>v-for</h4><p><code>v-for</code> 列表渲染指令，迭代 data 中的值，如 </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(item, index) in list"</span> <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	如果 v-for 遍历的是对象</span></span><br><span class="line"><span class="comment">	&lt;li v-for="value in obj" :key="key"&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">	&lt;li v-for="(value, key) in obj" :key="key"&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">注意，对象确实能获取 index, 按它的顺序，但基本不用，可能是无法保持每次的顺序都一样？因为 JS 对象的遍历顺序不一定是自己定义属性的顺序。不知道 Vue 是否有做优化。</span></span><br><span class="line"><span class="comment">	&lt;li v-for="(value, key, index) in obj" :key="key"&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>

<p>这个操作会把 data.list 遍历一次，可以得到值和它对应的索引，之后再这个标签内部其他属性都可以访问到这两个变量。使用这个指令之后，一定要记得加上<code>:key=&quot;index&quot;</code>  key 的值应该是唯一的，不应该是 index，这样可能会使 diff 优化失效，这里只是演示一下，可以绑定数据请求之后返回的 id, 它一般都是唯一且不变的，在整个生命周期中都保持稳定。</p>
<p>有 key 在内存在实际就是链表了，所以插入效率变高，key 的作用主要是为了高效的更新 DOM. </p>
<p>注意，重复的 key 将会使 Vue 出现警告, 可能会错误渲染 DOM。</p>
<h4 id="v-html"><a href="#v-html" class="headerlink" title="v-html"></a>v-html</h4><p><code>v-html</code> 类似于 innerHTML，但是绑定在标签属性上，如</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-html</span>=<span class="string">"html"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- js --&gt;</span></span><br><span class="line">// ..</span><br><span class="line">data: &#123;</span><br><span class="line">	html: '<span class="tag">&lt;<span class="name">p</span>&gt;</span> innerHTML <span class="tag">&lt;/<span class="name">p</span>&gt;</span>'</span><br><span class="line">&#125;</span><br><span class="line">// ..</span><br></pre></td></tr></table></figure>

<h4 id="v-text"><a href="#v-text" class="headerlink" title="v-text"></a>v-text</h4><p><code>v-text</code> 基本与 mustache 一致，但是它会覆盖标签内的全部内容，如 <code>&lt;div v-text=&quot;msg&quot;&gt;被覆盖的内容&lt;/div&gt;</code> div 标签内只会显示 data.msg 的值</p>
<h4 id="v-pre"><a href="#v-pre" class="headerlink" title="v-pre"></a>v-pre</h4><p><code>v-pre</code> 原封不动地显示标签内的内容，不做任何解析，无视插值表达式，其实与 <code>&lt;pre&gt;&lt;/pre&gt;</code> 标签有点相似，如 <code>&lt;div v-pre&gt;&lt;/div&gt;</code> ，div 内将会显示  ，不做任何解析</p>
<h4 id="v-cloak"><a href="#v-cloak" class="headerlink" title="v-cloak"></a>v-cloak</h4><p><code>v-cloak</code> 在 Vue 实例未挂载到页面上时，元素上会有 v-cloak 属性，当 Vue 渲染好了之后这个属性就会被删除。常用于解决请求时间过长而导致的闪现问题，某些情况下，页面会直接显示未编译的 Mustache 标签（如 用户可能看到 ，然后才会变成 data.msg ）。实际上只是为元素指定了一个属性名，然后可以在 css 中选中这个元素，在页面渲染完成的时候删除这个属性。 cloak (斗篷)</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- css --&gt;</span></span><br><span class="line">[v-cloak] &#123;</span><br><span class="line">	display: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">&lt;!-- html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-clock</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这样设置之后，用户就不会再网络请求速度较慢的情况下，看到  一闪而过的画面了。</p>
<h4 id="v-bind"><a href="#v-bind" class="headerlink" title="v-bind"></a>v-bind</h4><p><code>v-bind</code> 相当于属性的 mustache ，例如，在标签的属性中，我们不能直接写 <code>&lt;img src=&quot;&quot;&gt;&lt;/img&gt;</code>，而是要写成 <code>&lt;img v-bind:src=&quot;imgUrl&quot;&gt;&lt;/img&gt;</code> ，这样就会去 data 里找到 imgUrl 这个变量并将值赋给 img 的 src 属性。同时，如果修改了 imgUrl 的值，也会同步反应到 src 属性上。 相当于在 Vue 实例上做了一个中转。 简写为  <code>:</code>，同样，<strong>双引号内能写表达式</strong>，如三元表达式，但不能写语句，如 if 、 for 语句。注意，被v-bind 绑定的 <code>&quot;&quot;</code> 内的内容，是一个表达式，里面的不带 <code>&#39;&#39;</code> 的值都不再是字符串了。如 <code>&lt;div :class=&quot;[class1, class2]&quot;&gt;&lt;/div&gt;</code>，class1 和 class2 都是变量，会去 data 中找到之后传入数组，数组中的值都会被传到 class 上。但如果加上 <code>&#39;&#39;</code> 就会变成字符串。如 <code>:class=[&#39;class1&#39;,class]&quot;</code></p>
<p>下面是用 v-bind 通过对象的方式动态绑定 class 的例子</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span> <span class="attr">:class</span>=<span class="string">"&#123; active: isActive, line: isLine &#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- :class="&#123; className: Boolean &#125;" --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- js --&gt;</span></span><br><span class="line">// ..</span><br><span class="line">data: &#123;</span><br><span class="line">	isActive: true,</span><br><span class="line">	isLine: false</span><br><span class="line">&#125;</span><br><span class="line">// ..</span><br></pre></td></tr></table></figure>

<p>根据 data 中 isActive 的布尔值决定是否有 active 的类名, 根据 isLine 的布尔值决定是否有 line 的类名，而原本的 class 不会被覆盖，上面将会显示 <code>&lt;div class=&quot;title active&quot;&gt;&lt;/div&gt;</code>，而此时如果想删除原本的 title，就会比较困难，还是要获取 DOM，所以，以后把不会修改的 class 可以定死，而可能需要修改的 class 用 v-bind 绑定。如果 class 过于复杂，可以放到计算属性中，仍然用 v-bind 绑定。</p>
<p>如果 class 过于复杂，可以放到 computed (推荐) 或 methods 中，仍然用 v-bind 绑定。但这时候注意要写 this，同时注意 computed 不需要加 ()，并且不要把名字写的像个函数比如带个 getXXXByXXX，而 methods 需要 ()</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span> <span class="attr">:class</span>=<span class="string">"&#123; active: isActive, line: isLine &#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span> <span class="attr">:class</span>=<span class="string">"getClasses()"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span> <span class="attr">:class</span>=<span class="string">"classes2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- js --&gt;</span></span><br><span class="line">// ..</span><br><span class="line">data: &#123;</span><br><span class="line">	isActive: true,</span><br><span class="line">	isLine: false</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">	getClasses: function () &#123;</span><br><span class="line">		return &#123; active: this.isActive, line: this.isLine &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;,</span><br><span class="line">computed: &#123;</span><br><span class="line">	classes2: function () &#123;</span><br><span class="line">		return &#123; active: this.isActive, line: this.isLine &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">// ..</span><br></pre></td></tr></table></figure>

<p>为了看得更清楚，再举个简单的例子 v-bind 绑定 style，以对象的形式，<strong>以后会经常这样写</strong>，当然，如果写的过于复杂，可以放到计算属性中，返回一个对象即可。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span> <span class="attr">:style</span>=<span class="string">"&#123; fontSize: yourSize, width: '500px' &#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- js --&gt;</span></span><br><span class="line">// ..</span><br><span class="line">data: &#123;</span><br><span class="line">	yourSize: 50px</span><br><span class="line">&#125;</span><br><span class="line">// ..</span><br></pre></td></tr></table></figure>

<p>可以看到 font-size 值与 data 中的 yourSize 绑定，注意驼峰命名，而 width 是 500px，注意单引号内的内容才表示字符串，表示写死。如果 500px 不加 <code>&#39;&#39;</code> ，将会被当作变量去解析，然后 data 中找不到 50px 这个变量就会报错，而且对象的属性也不能以数字开头。</p>
<h5 id="初始值的定义"><a href="#初始值的定义" class="headerlink" title="初始值的定义"></a>初始值的定义</h5><p>如果 v-bind 一个对象(对象 a)中的对象(对象 b)的某个属性(属性 c)，并且对象 a 的初始值只是定义了 {}，对象 b 是异步获取的情况下，需要把对象 b 定义一下。同理，如果有一个嵌套数组，也应该定义一下初始值，如 <code>arr[0][0]</code> ，arr[0] 是一个数组，如果没定义，那么它将返回 undefined，undefined[0] 将会报错。如果在 data 中某个值将会被异步赋值成一个函数，并在页面中调用，也需要注意这个问题，应该初始化成一个函数。</p>
<p>其他时候，并不需要定义初始值。注意引用类型的初始值即可。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">			这种情况下， 刚进入页面时将会报错，因为 a.b 为 undefined, a.b.c 相当于 undefined['c']，直接报错 TypeError，当然页面还是能正常运行，因为异步获取数值之后，页面会重新渲染，但控制台会飘红，难受。</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">        &#123;&#123;a.b.c&#125;&#125;</span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">			这种情况下，刚进入页面不会报错，因为 a.b 会取得一个空对象 &#123;&#125;，所以 a.b.c 将会得到 undefined，不会报错了。</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">        &#123;&#123;anotherA.b.c&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line">            a: &#123;&#125;,</span><br><span class="line">            anotherA: &#123;</span><br><span class="line">                b: &#123;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line"><span class="javascript">        axios.get(<span class="string">'url'</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123; <span class="comment">// 假如 res.data 为 &#123; b: &#123; c: 1 &#125; &#125;</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">this</span>.a = res.data</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">this</span>.anotherA = res.data</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="v-show"><a href="#v-show" class="headerlink" title="v-show"></a>v-show</h4><p><code>v-show</code> 决定元素是否显示在页面上，当值为 false 时，<strong>仅仅是将元素行内样式的 display 属性设置为 none</strong>，从而控制显示与否。切换频繁时用该指令控制。</p>
<h4 id="v-if"><a href="#v-if" class="headerlink" title="v-if"></a>v-if</h4><p><code>v-if</code> 是条件渲染，按 v-if 绑定的值为 true 或 false 来决定是否渲染在页面中, 当值为 false 时，<strong>将不会有该元素存在于 DOM 中，这也是与 v-show 的区别，如果没有出现在 DOM 中，它的 ref 属性是无效的，无法在 $ref 中找到元素。</strong>只有少数切换时用该指令控制。</p>
<p>如 <code>&lt;div v-if=&quot;isShow&quot;&gt;&lt;/div&gt;</code>  <code>data: { isShow: true }</code></p>
<p>由于 v-if 渲染的时候也会经过 diff 算法，所以可能 v-if 前后同位置的元素可能是同一个，而不是替换了新元素。例子如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">v-if</span>=<span class="string">"isUser"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"username"</span>&gt;</span>用户账号<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">placeholder</span>=<span class="string">"用户账号"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"email"</span>&gt;</span>用户邮箱<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"email"</span> <span class="attr">placeholder</span>=<span class="string">"用户邮箱"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	页面中有两个 span 标签, 用 v-if 控制它们的显示，当在 input 框中输入内容后，改变 isUser 的布尔值, 将会显示另一个 input 框, 但它框内有值，而且是切换之前输入的值。</span></span><br><span class="line"><span class="comment">	当切换 isUser 的值时, 将会显示不用的 span 标签内容, 而 span 标签中 都是 label input 两个标签， input 的 type 也都是 text, 这时候 diff 算法分析两组元素都没有 key 值, 之后比较位置发现都是同一位置同一结构，就会将原 input 的属性改变, 而不是替换一个新的 input, 也就是说, 在DOM 上, 它只是改变了 input 的 id 属性 和 placehloder 属性, 而不是 document.createElement('input') 创建了新的 input 标签</span></span><br><span class="line"><span class="comment">	如果我们不希望 Vue 出现这种重复利用的问题, 给 input 绑定唯一的 key 值就可以解决</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// ...</span></span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">            isUser: <span class="literal">true</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	题外：</span></span><br><span class="line"><span class="comment">	&lt;button :disable="isDisable" \&gt;  button 标签有 disable 属性, 可以为 true 或 false 来控制是否可以点击</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	&lt;input type="text" @input="valueChanged" /&gt; input 标签有 input 事件，当输入框的内容发生改变时触发</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	// v-model 它是 v-on 和 v-bind 的语法糖，双向绑定实现 注意 value 要用 $event.target.value 取</span></span><br><span class="line"><span class="comment">	&lt;input type="text" @input="message = $event.target.value" :value="message"&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h4><p><code>v-model</code> 实现表单元素的数据双向绑定。例举比较少用但可能用到的， text、password 这些常见的不再举例。</p>
<p>本质是用 <code>v-bind:value + v-on:input</code> 实现</p>
<h5 id="radio"><a href="#radio" class="headerlink" title="radio"></a>radio</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 正常原生写法，两个 radio 框的 name 需要相同才能让这两个 radio 只能选中一个，否则两个框都可以点 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">value</span>=<span class="string">"男"</span> <span class="attr">name</span>=<span class="string">"sex"</span>&gt;</span>男</span><br><span class="line"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">value</span>=<span class="string">"女"</span> <span class="attr">name</span>=<span class="string">"sex"</span>&gt;</span>女</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- v-model 写法，如果 v-model 绑定同一个值, 可以省去 name, 点击单选框的时候，自动把 value 的值赋值给 sex --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">value</span>=<span class="string">"男"</span> <span class="attr">v-model</span>=<span class="string">"sex"</span>&gt;</span>男</span><br><span class="line"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">value</span>=<span class="string">"女"</span> <span class="attr">v-model</span>=<span class="string">"sex"</span>&gt;</span>女</span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	相当于 &lt;input type="radio" value="男" name="sex" :checked="sex === '男'" @input="sex = $event.target.value"&gt;</span></span><br><span class="line"><span class="comment">		  &lt;input type="radio" value="女" name="sex" :checked="sex === '女'" @input="sex = $event.target.value"&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">	<span class="comment">// ...</span></span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">            sex: <span class="string">'男'</span> <span class="comment">// 定义默认值，选择男</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="checkbox"><a href="#checkbox" class="headerlink" title="checkbox"></a>checkbox</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"多选框1"</span> <span class="attr">v-model</span>=<span class="string">"CB1"</span>&gt;</span></span><br><span class="line">&#123;&#123;CB1&#125;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">	<span class="comment">// ...</span></span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">            CB1: <span class="string">''</span> <span class="comment">// 如果绑定的值不是数组， v-model 会根据这个 checkbox 的选中与否 将这个值赋值为布尔值，如选中后将会变成 CB1: true, 不选中时 CB1: false</span></span></span><br><span class="line"><span class="actionscript">         <span class="comment">// , CB1: [], // 如果绑定的是数组， v-model 会根据这个 checkbox 的选中与否 往这个数组中传递 checkbox 的 value 值, 选中后 CB1: ['多选框1'](如果该 checkbox 上没有 value 值，会变成 CB1: [null]), 不选中时 CB1: []</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"多选框2"</span> <span class="attr">v-model</span>=<span class="string">"CB2"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"多选框3"</span> <span class="attr">v-model</span>=<span class="string">"CB2"</span>&gt;</span></span><br><span class="line">&#123;&#123;CB2&#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">	<span class="comment">// ...</span></span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">            CB2: <span class="string">''</span> <span class="comment">// 如果绑定的值不是数组， v-model 会根据 checkbox 的选中与否 将这个值赋值为布尔值，如选中后将会变成 CB2: true, 不选中时 CB2: false, 所以如果是两个 checkbox 同时绑定了这个值，那么它们就会被同时选中或同时不被选中，因为绑定的是同一个布尔值</span></span></span><br><span class="line"><span class="actionscript">         <span class="comment">// , CB2: [], // 如果绑定的是数组， v-model 会根据 checkbox 的选中与否 往这个数组中传递 checkbox 的 value 值, 如第一个 checkbox 选中后 CB2: ['多选框2'], 不选中时 CB2: []</span></span></span><br><span class="line">         /* 如果选中第一个 checkbox 后再选择第二个 checkbox, CB2: ['多选框2', '多选框3'](里面的项的顺序与点击顺序一致)，注意，如果它们都没有 value 值，就会传入 [null]，而且由于两个 checkbox 的值都是 null，将会只有 [null] 和 [] 两种状态，也就是说，它们也会变成只能同时选中或同时不选中。所以多个选择框的时候一定要带 value. </span><br><span class="line"><span class="actionscript">         checkbox 没 value 时，默认 value 为 <span class="literal">null</span></span></span><br><span class="line">        */</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	总结，单选框绑定的值不要是数组，一般绑定一个值为 false 的变量</span></span><br><span class="line"><span class="comment">		多选框要求绑定数组，一般绑定一个值为 [] 的变量</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	正式使用写法， value 也是从 data 中取值。建立两个数组，一个存放可选值，一个存放选中值</span></span><br><span class="line"><span class="comment">label 的 :for 和 input 的 :id 这两者的值应该保持一致才能让 label 生效，即点击文字也能选中选择框</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	&lt;label v-for="item in originList" :for="item"&gt;</span></span><br><span class="line"><span class="comment">		&lt;input type="checkbox" :value="item" :id="item" v-model="selectedList"&gt;&#123;&#123;item&#125;&#125;</span></span><br><span class="line"><span class="comment">	&lt;/label&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="select"><a href="#select" class="headerlink" title="select"></a>select</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- select 也分成单选和多选的情况 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 单选， 即不带 multiple 属性时 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">"fruit"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"苹果"</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"香蕉"</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"西瓜"</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// ...</span></span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">            fruit: <span class="string">''</span> <span class="comment">// select 不带 multiple 属性时, 不管这个值定义成数组还是对象还是布尔值什么的，这个值都会变成字符串，变成被选中项的 value 值，如选中第一项，就会变成 fruit: '苹果'</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 多选， 即带 multiple 属性时 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">"fruits"</span> <span class="attr">multiple</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"苹果"</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"香蕉"</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"西瓜"</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// ...</span></span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">            fruits: <span class="string">''</span> <span class="comment">// select 带 multiple 属性时, 不管这个值定义成字符串还是数组还是对象还是布尔值什么的，这个值都会变成数组，数组中存有被选中项的 value 值，如选中第一项，就会变成 fruits: ['苹果']，此时用 Ctrl + 左键 选择第二项，就会变成 fruits: ['苹果'， '香蕉']，即使先选中第二项再选中第一项，数组中的顺序也是这样。这一点和 checkbox 不一样</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="v-model-的拆解"><a href="#v-model-的拆解" class="headerlink" title="v-model 的拆解"></a>v-model 的拆解</h5><p>v-model 实际是一个语法糖，可以拆解为 props: value 和 events: input。也就是说，只要某个组件能提供一个名为 value 的 prop，以及名为 input 的自定义事件，就能在该组件上使用 v-model。</p>
<p><em>vue2.2</em> 之后，可以定制 v-model 指令的 prop 和 event 名称。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cp</span> <span class="attr">v-model</span>=<span class="string">"value"</span>&gt;</span><span class="tag">&lt;/<span class="name">cp</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"changePVal"</span>&gt;</span>点击只改变父组件的 value<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">	<span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">        data() &#123;</span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line">                value: 321</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            changePVal() &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.value++</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        from parent: &#123;&#123;value&#125;&#125; <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        current: &#123;&#123;currentValue&#125;&#125; <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"changeVal"</span>&gt;</span>点击两个都加1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">        props: &#123;</span><br><span class="line"><span class="actionscript">            <span class="comment">// 定义 value</span></span></span><br><span class="line"><span class="javascript">            value: <span class="built_in">Number</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        data() &#123;</span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 这里写两个 value，只是想说明 data 里的值可以这样写，this.xxx 获取 props 的值</span></span></span><br><span class="line"><span class="actionscript">                currentValue: <span class="keyword">this</span>.value</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            changeVal() &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.currentValue++</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 定义 input 事件</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.$emit(<span class="string">"input"</span>, <span class="keyword">this</span>.currentValue)</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="v-model-修饰符"><a href="#v-model-修饰符" class="headerlink" title="v-model 修饰符"></a>v-model 修饰符</h5><p><code>lazy</code> 由于默认情况下每次修改 input 的值，data 中的数据都会同步改变，改变频率非常高，我们希望只在 input 失焦或<strong>按下</strong>回车的时候才修改 data 中的值，就可以加上 <code>lazy</code> 修饰符，写法 <code>&lt;input type=&quot;text&quot; v-model.lazy=&quot;lazyData&quot;&gt;</code></p>
<p><code>number</code> 由于 v-model 默认赋给 data 中绑定的数据的值为 String 类型，通过 <code>number</code> 修饰符，可以变为数字 Number 类型。实际上是判断输入框的值第一个字符是否为数值，如果是数值，就调用 <code>parseFloat(val)</code> 方法，把这个值传入，data 中数据为这个方法的返回值，如果第一个字符不为数值，则无事发生，返回正常的字符串，所以不能保证为 Number 类型，除非写在 <code>type=&quot;number&quot;</code> 的 input 中，因为这种类型的 input 只允许输入数字，但它也会把绑定的值赋值为 String 类型。</p>
<p>text input 写法 <code>&lt;input type=&quot;text&quot; v-model.number=&quot;numberData&quot;&gt;</code></p>
<p>number input 写法 <code>&lt;input type=&quot;number&quot; v-model.number=&quot;numberData&quot;&gt;</code></p>
<p><code>trim</code> 去掉要传入到 data 中的值首尾的空格</p>
<h4 id="v-on"><a href="#v-on" class="headerlink" title="v-on"></a>v-on</h4><p><code>v-on</code> 相当于事件绑定，可以绑定已经设定好的事件或者自定义事件，如 <code>&lt;button v-on:click=&quot;btnClick&quot;&gt;&lt;/button&gt;</code> 简写为  <code>@</code> </p>
<p>当通过 methods 中定义方法，以供 @click 调用时，需要注意参数问题：</p>
<ul>
<li><p>情况一，如果该方法不需要额外参数，那么方法之后的 <code>()</code> 可以不添加。但是如果方法本身中有参数，这种情况下会默认将原生事件 event 对象当作参数传递过去 <code>@click=clickHandle</code></p>
<p><code>methods:{ clickHandle(e){ /* 方法需要参数，但 @ 绑定的事件回调函数不带括号时，默认第一个参数接收到 event 对象 ... */ } }</code></p>
</li>
<li><p>情况二，如果需要传入某个参数，同时需要 event 时，可以通过 $event 传入事件对象。<code>@click=&quot;clickHandle(val, $event)&quot;</code> <code>methods:{ clickHandle(val, e){ /* ... */ } }</code></p>
</li>
</ul>
<h4 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a>事件修饰符</h4><p><code>stop</code> 阻止冒泡 <code>@click.stop=&quot;clickHandle&quot;</code> 相当于调用了 <code>event.stopPropagation()</code></p>
<p><code>prevent</code> 阻止默认事件，如 a 标签的默认点击跳转，相当于调用了 <code>event.preventDefault()</code>. </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"baidu"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 不添加 event.preventDefault() 点击这个 input, 会默认在地址栏之后加上 /baidu?, 自动提交，发送一次请求，Vue 中改写成以下形式 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span> @<span class="attr">click.prevent</span>=<span class="string">"submitHandle"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 也可以后面不跟回调函数，单纯组织默认事件 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">form</span> @<span class="attr">submit.prevent</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>enter</code> 当按下 enter 键时才触发事件 <code>@keyup.enter=&quot;enterHandle&quot;</code> , 还有一种是写成键代码的形式<code>@keyup.13=&quot;enterHandle&quot;</code></p>
<p><code>native</code> 监听组件的点击事件 <code>&lt;cpn @click.native=&quot;cpnClick&quot;&gt;&lt;/cpn&gt;</code> ，<code>&lt;cpn&gt;</code> 是自定义的组件，直接写 <code>@click</code> 是无法触发组件的点击事件的</p>
<p><code>once</code> 只触发一次事件之后就不触发了 <code>@click.once</code></p>
<p><strong>串联修饰符: 修饰符可以串起来用</strong>，如 <code>@click.stop.prevent=&quot;clickHandle&quot;</code></p>
<h4 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h4><p><code>Vue.directive</code> 在 <code>Vue2.0</code> 中，代码复用和抽象的主要形式是组件。有的情况下，你仍然需要对普通 DOM 元素进行底层操作，这时候就会用到自定义指令。</p>
<p><em>基本写法</em></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局注册自定义指令 v-focus</span></span><br><span class="line"><span class="comment">// 如果传入的第二个参数是函数而不是对象，将会默认把 bind 和 update 属性定义为该函数</span></span><br><span class="line">Vue.directive(<span class="string">'focus'</span>, &#123;</span><br><span class="line">    <span class="comment">// 当被绑定元素插入到父节点中，仅保证父节点存在，但不一定已被插入到文档中</span></span><br><span class="line">    inserted: <span class="function"><span class="keyword">function</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 原生聚焦方法</span></span><br><span class="line">        el.focus()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 局部注册</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    directives: &#123;</span><br><span class="line">        <span class="string">'focus'</span>: &#123;</span><br><span class="line">            inserted(el) &#123;</span><br><span class="line">                el.focus()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  好了，仔细看一下</span></span><br><span class="line"><span class="keyword">let</span> directObj = &#123;&#125;</span><br><span class="line"><span class="comment">// 参数项，除了 el 外, 其他属性都应该是只读的，不要进行修改</span></span><br><span class="line"><span class="keyword">let</span> args = &#123;</span><br><span class="line">    el: <span class="string">'指定绑定的元素，可以用来操作 DOM'</span>,</span><br><span class="line">    binding: &#123; <span class="comment">// 一个对象，包含以下属性</span></span><br><span class="line">        name: <span class="string">'指令名'</span>,</span><br><span class="line">        value: <span class="string">'指令的绑定值，如 v-mydirective="1+1", 绑定值为2'</span>,</span><br><span class="line">        oldValue: <span class="string">'指令绑定的前一个值，仅在 update 和componentUpdated 钩子可用'</span>,</span><br><span class="line">        expression: <span class="string">'字符串形式的指令表达式。如 v-mydirective="1+1", 表达式为 "1+1"'</span>,</span><br><span class="line">        arg: <span class="string">'传给指令的参数，例如 v-mydirective:foo 中, 参数为 "foo"'</span>,</span><br><span class="line">        modifiers: <span class="string">'一个包含修饰符的对象，如 v-mydirective:foo.bar 中，值为&#123;foo: true, bar: true&#125;'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    vnode: <span class="string">'虚拟节点'</span>,</span><br><span class="line">    oldVnode: <span class="string">'上一个虚拟节点'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 只调用一次，指定第一次绑定到元素时调用，在这里可以进行一些初始化的东西</span></span><br><span class="line">directObj.bind = <span class="function"><span class="keyword">function</span> (<span class="params">&#123;...args&#125;</span>) </span>&#123;&#125;</span><br><span class="line"><span class="comment">// 当被绑定元素插入父节点时调用，仅保证父节点存在，但不一定已插入到文档中</span></span><br><span class="line">directObj.inserted = <span class="function"><span class="keyword">function</span> (<span class="params">&#123;...args&#125;</span>) </span>&#123;&#125;</span><br><span class="line"><span class="comment">// 所在组件的 vnode 更新时调用，但是可能发生在其子 vnode 更新前，指令的值可能发生了改变，也可能没有，但你可以比较更新前后的值来忽略不必要的模板更新</span></span><br><span class="line">directObj.update = <span class="function"><span class="keyword">function</span> (<span class="params">&#123;...args&#125;</span>) </span>&#123;&#125;</span><br><span class="line"><span class="comment">// 指令所在组件的 vnode 及其子组件的 vnode 全部更新完成后调用</span></span><br><span class="line">directObj.componentUpdate = <span class="function"><span class="keyword">function</span> (<span class="params">&#123;...args&#125;</span>) </span>&#123;&#125;</span><br><span class="line"><span class="comment">// 只调用一次，指令与元素解绑时调用</span></span><br><span class="line">directObj.unbind = <span class="function"><span class="keyword">function</span> (<span class="params">&#123;...args&#125;</span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>简单使用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-focus</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line">        directives: &#123;</span><br><span class="line">            focus: &#123;</span><br><span class="line"><span class="actionscript">                <span class="comment">// 插入到 DOM 中的狗子</span></span></span><br><span class="line">                inserted(el) &#123;</span><br><span class="line"><span class="actionscript">                    <span class="comment">// 自动聚焦</span></span></span><br><span class="line">                    el.focus()</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>可以利用它来实现图片懒加载指令，<code>v-lazyload</code>，具体代码不展示了。</p>
<h3 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h3><p><code>computed</code> 对象中的属性，都要写成函数形式，并且有一个返回值。而在页面中用 mustache 时，不需要像 methods 中定义的方法那样加上 <code>()</code> ，就当作 data 中的值来用即可。计算属性与方法的区别是计算属性是有缓存的，而方法每次都需要重新执行。</p>
<p><strong>它的本质是 set 和 get</strong>，如 <code>fullName: { set(), get() }</code> ，只是我们一般不定义 set()，所以默认指定 get()</p>
<p>下面是个简单的例子，写出了 computed 内属性的简写形式与完整形式</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; fullName &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- js --&gt;</span></span><br><span class="line">// ..</span><br><span class="line">data: &#123;</span><br><span class="line">	firstName: 'Sansan',</span><br><span class="line">	lastName: 'Zhang'</span><br><span class="line">&#125;,</span><br><span class="line">computed: &#123;</span><br><span class="line">	// 简写</span><br><span class="line">	fullName: function () &#123;</span><br><span class="line">		return this.firstName + ' ' + this.lastName</span><br><span class="line">	&#125;</span><br><span class="line">	// 完整</span><br><span class="line">	fullName: &#123;</span><br><span class="line">		set: function (newValue) &#123;</span><br><span class="line">			// set 会传入新修改的值</span><br><span class="line">			/* 我们一般希望计算属性没有 set 方法，让它成为一个只读属性，因此都不写 set, 之后发现每次只写一个 get, 外面也还要包一层对象太麻烦了，直接把 get 和外面包的那层对象也省略了，所以最后写出来就是上面的简写形式 */</span><br><span class="line">		&#125;,</span><br><span class="line">		// 每次获取 fullName 这个属性的时候，都会自动执行 fullName.get()，所以计算属性不加 ()，而它本身是一个对象的属性，所以会有缓存。这是原生 JS 对象部分的内容。</span><br><span class="line">		get: function () &#123;</span><br><span class="line">			return this.firstName + ' ' + this.lastName</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">// ..</span><br><span class="line">/* 补充，Vue 源码片段，可以看出，其实没有什么完整版不完整的写法，只是它设定了根据 computed 内的属性类型是函数还是对象来决定怎么获取这个属性，大家这样叫而已。</span><br><span class="line">      for (var key in computed) &#123;</span><br><span class="line">        var userDef = computed[key];</span><br><span class="line">        var getter = typeof userDef === 'function' ? userDef : userDef.get;</span><br><span class="line">		// ...</span><br><span class="line">	  &#125;</span><br><span class="line">同样地，贴上 Vue 源码片段，可以看到它把计算属性保存在了 target 的 get 属性描述符上。</span><br><span class="line">      if (typeof userDef === 'function') &#123;</span><br><span class="line">        sharedPropertyDefinition.get = shouldCache</span><br><span class="line">          ? createComputedGetter(key)</span><br><span class="line">          : createGetterInvoker(userDef);</span><br><span class="line">        sharedPropertyDefinition.set = noop;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        sharedPropertyDefinition.get = userDef.get</span><br><span class="line">          ? shouldCache &amp;&amp; userDef.cache !== false</span><br><span class="line">            ? createComputedGetter(key)</span><br><span class="line">            : createGetterInvoker(userDef.get)</span><br><span class="line">          : noop;</span><br><span class="line">        sharedPropertyDefinition.set = userDef.set || noop;</span><br><span class="line">      &#125;</span><br><span class="line">      // ...</span><br><span class="line">      Object.defineProperty(target, key, sharedPropertyDefinition);</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<p>其实计算属性也能实现类似 methods 的效果，它可以返回一个函数。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    &#123;&#123;numPower(3)&#125;&#125;  <span class="comment">&lt;!-- 最终显示 9 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line">    computed: &#123;</span><br><span class="line">        numPower() &#123;</span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">(num)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> num * num</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">&#125;).$mount(<span class="string">'#app'</span>)    </span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h3><p><code>filter</code> Vue3.0 移除了，鸽了。</p>
<p>留坑</p>
<h3 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h3><p><code>watch</code> 可以</p>
<h3 id="响应式"><a href="#响应式" class="headerlink" title="响应式"></a>响应式</h3><p>Vue 内部重写了部分数组方法，将会监听数组数据的变化。从而达到响应式的目的。只有通过这些方法修改数组，数据才会是响应式的。 <strong>注意：直接修改对象的属性是响应式的，而直接修改数组的属性不是。</strong>准确地说，直接修改已在 data 中声明的对象属性是响应式的，而直接修改数组的属性或 data 中未声明的对象属性不是响应式的。</p>
<p>直接通过索引，如 <code>this.arr[o] = &#39;no render&#39;</code> 这样通过索引值来修改数组中的元素，页面绑定的该值(arr[o])是不会发生改变的。如果想要响应式修改数据，可以这样写</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.arr.splice(<span class="number">0</span>, <span class="number">1</span>, <span class="string">'render'</span>)</span><br><span class="line"><span class="comment">// 或者 Vue 中提供 set 方法</span></span><br><span class="line"><span class="comment">// Vue.set(obj, key, newVal), 这是 Vue 官方提供的，与我们直接修改的区别就是，它是响应式的，因为通过这种方式添加或修改的数据上面通知 Observer 对象，再通知它的 Dep 对象（用于监听数组、对象这种复杂对象），这个对象会检测值是否发生改变，如果发生改变，查找一个数组（Dep 上的 subs 属性），这个数组的内容是页面中所有用到这个值的地方，类似这样 [Watcher, Watcher, ... , Watcher]，里面是一个个 Watcher 对象，一旦 Dep 监听的属性发生了变化，就会通知这些 Watcher，告诉它们这些地方要重新渲染了。</span></span><br><span class="line">Vue.set(<span class="keyword">this</span>.arr, <span class="number">0</span>, <span class="string">'render'</span>) <span class="comment">// 数组中键名 key 为它们的索引</span></span><br><span class="line"></span><br><span class="line">Vue.set(<span class="keyword">this</span>.obj, <span class="string">'num'</span>, <span class="number">0</span>) <span class="comment">// 给 obj 添加一个 num 属性，它的值为 0.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除</span></span><br><span class="line">Vue.delete(<span class="keyword">this</span>.arr, <span class="number">0</span>)</span><br><span class="line">Vue.delete(<span class="keyword">this</span>.obj, <span class="string">'num'</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>push()</code> 将元素添加到最后 可以 push 多个元素，如 <code>this.arr.push(&#39;aa&#39;, &#39;bb&#39;, &#39;cc&#39;)</code></li>
<li><code>pop()</code> 删除最后一个元素</li>
<li><code>shift()</code> 删除第一个</li>
<li><code>unshift()</code> 将元素添加到最前面 同样可以 unshift 多个元素，如 <code>this.arr.unshift(&#39;aa&#39;, &#39;bb&#39;, &#39;cc&#39;)</code>，源码 lib.es5.d.ts (d 就是 define 定义的意思) 文件中是这样定义的 <code>unshift(...items: T[]):number</code>  看到参数是 <code>...</code>，所以可以传多个参数。 push 同理。 T[] 是 ts 语法，泛型，先不用管这个。</li>
<li><code>splice(start, num, ele, ele, ..., ele)</code> 在指定位置开始，替换指定个数元素，变成新传入的元素。写成 <code>splice(start)</code> 将会 删除索引为 start 之后的所有元素.</li>
<li><code>sort()</code></li>
<li><code>reverse()</code></li>
</ul>
<h4 id="Vue-set-obj-key-newVal"><a href="#Vue-set-obj-key-newVal" class="headerlink" title="Vue.set(obj, key, newVal)"></a>Vue.set(obj, key, newVal)</h4><p><code>Vue.set(obj, key, newVal)</code>, 这是 Vue 官方提供的，与我们直接修改的区别就是，它是响应式的，因为通过这种方式添加或修改的数据上面会增加一个 Dep 对象，这个对象会检测值是否发生改变，如果发生改变，查找一个数组，这个数组的内容是页面中所有用到这个值的地方，类似这样 [Watcher, Watcher, … , Watcher]，里面是一个个 Watcher 对象，一旦 Dep 监听的属性发生了变化，就会通知这些 Watcher，告诉它们要重新渲染了。</p>
<h4 id="Vue-delete-obj-key"><a href="#Vue-delete-obj-key" class="headerlink" title="Vue.delete(obj, key)"></a>Vue.delete(obj, key)</h4><p><code>Vue.delete(obj, key)</code>，同样也是 Vue 官方提供的，与我们直接使用 delete 删除对象的方法（如 <code>delete this.obj.num</code>）的区别是，它是响应式的，如果我们直接 delete，页面中通过这个属性被渲染地方仍然存在，不会因为这个属性消失了而消失。</p>
<h3 id="混入"><a href="#混入" class="headerlink" title="混入"></a>混入</h3><p>在生命周期钩子中调用时，如果有同名方法，优先执行混入对象的方法再调用它自己的方法。</p>
<h4 id="合并策略"><a href="#合并策略" class="headerlink" title="合并策略"></a>合并策略</h4><p>如果在 methods 中有和混入对象同名的方法，默认执行组件自己的方法，而不是混入对象的方法。</p>
<p>可以对 <code>Vue.config.optionMergeStrategies</code> 对象进行配置自定义选项合并策略。详情见官方文档。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue.config.optionMergeStrategies.myOptions = <span class="function"><span class="keyword">function</span> (<span class="params">toVal, fromVal</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// return mergedVal</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><p>慎用全局混入方法 <code>Vue.mixin</code> ，它将会使所有新建的 Vue 实例对象上都有 <code>mixin</code> 的内容，包括第三方模板。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// common/mixin.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> itemMixin = &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            msg: <span class="string">'mixin'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    components: &#123;&#125;,</span><br><span class="line">    methods: &#123;&#125;,</span><br><span class="line">    computed: &#123;&#125;,</span><br><span class="line">    mounted: &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.msg)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> itemMixin2 = &#123;</span><br><span class="line">    created() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'mixin2'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 组件中使用</span></span><br><span class="line"><span class="keyword">import</span> &#123; itemMixin, itemMixin2 &#125; <span class="keyword">from</span> <span class="string">'common/mixin.js'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;&#125;,</span><br><span class="line">    mixins: [itemMixin, itemMixin2] <span class="comment">// 局部使用，接收一个数组，会把数组中的每项都混入到当前组件中</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局使用</span></span><br><span class="line">Vue.mixin(itemMixin)</span><br><span class="line">Vue.mixin(itemMixin2)</span><br></pre></td></tr></table></figure>

<h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><p>组件化是 Vue.js 中的重要思想，让我们可以开发出一个个独立可复用的小组件来构造我们的应用。当我们开始新项目的时候，可以直接使用之前封装好的组件来快速开发。任何的应用都会被抽象成一颗组件树。</p>
<p>组件使用步骤</p>
<ul>
<li>创建组件构造器 <code>Vue.extend()</code> 传入一个对象，里面有 template 这个属性，包含了 html 模板字符串。 但这种方式已经非常少见了，一般使用语法糖（主要是省去了 <code>Vue.extend()</code> 这一步，由 Vue 内部来执行）</li>
<li>注册全局组件 <code>Vue.component()</code> 传入两个参数，组件名 和 组件构造器对象，如果要局部注册，则在 Vue 实例对象中的 components 属性 以 <code>&#39;组件名&#39;: 组件构造器对象</code> 形式传入要注册的组件。<strong>注意，组件名应该加上引号！否则将被识别为一个变量</strong>。当然，局部注册的时候，可以不加，因为是对象的属性名，但如果这个属性名里带有特殊字符如 <code>-</code> 这种，也必须加引号。</li>
<li>使用组件 <code>在 Vue 实例的作用范围内使用组件</code></li>
</ul>
<h4 id="基本使用-1"><a href="#基本使用-1" class="headerlink" title="基本使用"></a>基本使用</h4><h5 id="简单举例"><a href="#简单举例" class="headerlink" title="简单举例"></a>简单举例</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 假如我们的页面中有这样几个重复的部分 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容一<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容二<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容一<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容二<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容一<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容二<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 使用组件。 这是一种思想！ --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	伪代码</span></span><br><span class="line"><span class="comment">    &lt;cpn&gt;</span></span><br><span class="line"><span class="comment">        &lt;h2&gt;我是标题&lt;/h2&gt;</span></span><br><span class="line"><span class="comment">        &lt;p&gt;我是内容一&lt;/p&gt;</span></span><br><span class="line"><span class="comment">        &lt;p&gt;我是内容二&lt;/p&gt;</span></span><br><span class="line"><span class="comment">    &lt;/cpn&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 使用组件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-cpn</span>&gt;</span><span class="tag">&lt;/<span class="name">my-cpn</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 以下写法均有效，效果同上 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">my-cpN</span>&gt;</span><span class="tag">&lt;/<span class="name">My-cpn</span>&gt;</span>  </span><br><span class="line">	<span class="tag">&lt;<span class="name">mY-cpn</span>&gt;</span><span class="tag">&lt;/<span class="name">my-cpn</span>&gt;</span>  </span><br><span class="line">	<span class="tag">&lt;<span class="name">my-Cpn</span>&gt;</span><span class="tag">&lt;/<span class="name">my-cpn</span>&gt;</span>      </span><br><span class="line">    <span class="comment">&lt;!-- 以下为错误写法 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">myCpn</span>&gt;</span><span class="tag">&lt;/<span class="name">myCpn</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 创建组件构造器对象</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> cpnConstructor = Vue.extend(&#123;</span></span><br><span class="line"><span class="handlebars"><span class="xml">        // 写 template 的时候记得外面必须包一层，如这里包的是 <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line">        template: ` </span><br><span class="line"><span class="handlebars"><span class="xml">		<span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容一<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容二<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line">		`</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line"><span class="handlebars"><span class="xml">    // 注册组件， 注意：注册组件名为 my-cpn 和 myCpn 在 html 中都只能使用 <span class="tag">&lt;<span class="name">my-cpn</span>&gt;</span> 来使用这个组件，因为 Vue 会自动把 html 标签转为小写，如 C 变成 c. 之后再根据是否有连字符 -, 来决定是否转为大写，还会把组件名首字母大写，如 <span class="tag">&lt;<span class="name">MY-cpn</span>&gt;</span> --&gt; <span class="tag">&lt;<span class="name">my-cpn</span>&gt;</span> --&gt; <span class="tag">&lt;<span class="name">myCpn</span>&gt;</span> --&gt; <span class="tag">&lt;<span class="name">MyCpn</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    // 因此 <span class="tag">&lt;<span class="name">MYCPN</span>&gt;</span> 和 <span class="tag">&lt;<span class="name">mycpn</span>&gt;</span> 和 <span class="tag">&lt;<span class="name">myCpn</span>&gt;</span> 被 vue 解析出来的都是 <span class="tag">&lt;<span class="name">Mycpn</span>&gt;</span>. 不符合 <span class="tag">&lt;<span class="name">my-cpn</span>&gt;</span> 所以不能用，只能用 <span class="tag">&lt;<span class="name">my-cpn</span>&gt;</span><span class="tag">&lt;/<span class="name">my-cpn</span>&gt;</span> 这样的形式，不区分大小写，所以这样写也有效 <span class="tag">&lt;<span class="name">MY-cpn</span>&gt;</span><span class="tag">&lt;/<span class="name">my-CPN</span>&gt;</span></span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 而当组件名写成 'my-Cpn'时（虽然一般人也不可能这样写，但举个例子），html 就得写成 &lt;my--cpn&gt; 大小写随意, 反正记得在 Vue 中 html 标签不区分大小写</span></span></span><br><span class="line"><span class="actionscript">    Vue.component(<span class="string">'my-cpn'</span>, cpnConstructor)</span></span><br><span class="line">    </span><br><span class="line"><span class="actionscript">	<span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>   </span></span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    /*</span><br><span class="line">    	局部注册</span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line">        components: &#123;</span><br><span class="line"><span class="actionscript">        	<span class="string">'my-cpn'</span>: cpnConstructor</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    */</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="把上面的例子用父子组件来改写"><a href="#把上面的例子用父子组件来改写" class="headerlink" title="把上面的例子用父子组件来改写"></a>把上面的例子用父子组件来改写</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span>&gt;</span><span class="tag">&lt;/<span class="name">cp</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 定义子组件</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> childCp = Vue.extend(&#123;</span></span><br><span class="line">        template: `</span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容一<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容二<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line">        `</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line"><span class="actionscript">    <span class="comment">// 定义父组件</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> parentCp = Vue.extend(&#123;</span></span><br><span class="line">        template: `</span><br><span class="line"><span class="handlebars"><span class="xml">			<span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    			<span class="tag">&lt;<span class="name">cp</span>&gt;</span><span class="tag">&lt;/<span class="name">cp</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    			<span class="tag">&lt;<span class="name">cp</span>&gt;</span><span class="tag">&lt;/<span class="name">cp</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    			<span class="tag">&lt;<span class="name">cp</span>&gt;</span><span class="tag">&lt;/<span class="name">cp</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line">		`,</span><br><span class="line">        components: &#123;</span><br><span class="line"><span class="actionscript">            <span class="string">'cp'</span>: childCp <span class="comment">// 在父组件中注册子组件并取名为 cp, 这里特地和父组件中的组件重名，来说明这样注册是局部注册，这个 cp 只会作用在父组件自身的 template 中，并且是 childCp 的 template 内容，全局中并没有这个 cp 组件</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line"><span class="actionscript">	<span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line">        components: &#123;</span><br><span class="line"><span class="actionscript">            <span class="string">'cp'</span>: parentCp  <span class="comment">// 在 Vue 实例中注册父组件并取名为 cp, 这里特地和父组件中的组件重名，来说明这样上面父组件的注册是局部注册，这个 cp 只会作用在 Vue 实例范围内，并且是 parentCp 的 template 内容，而且传进来的 parentCp 的 template 内容中，已经将 parentCp 中注册的组件 cp 编译为了 childCp 中的 template 内容。</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="语法糖形式"><a href="#语法糖形式" class="headerlink" title="语法糖形式"></a>语法糖形式</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 古老写法 全局注册 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 定义组件</span></span></span><br><span class="line"><span class="actionscript">	<span class="keyword">const</span> cp = Vue.extend(&#123;</span></span><br><span class="line">        template: `</span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容一<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容二<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line">		`</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line"><span class="actionscript">    <span class="comment">// 注册组件</span></span></span><br><span class="line"><span class="actionscript">    Vue.component(<span class="string">'cp'</span>, cp)</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 语法糖形式 全局注册 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">	Vue.component(<span class="string">'cp'</span>, &#123;</span></span><br><span class="line">        template: `</span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容一<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容二<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line">		`</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="actionscript">    <span class="comment">// 可以看到，语法糖形式只是把 Vue.extend 给省去了，Vue.component 中的第二个参数直接传入一个对象，而不是一个组件构造器对象。 实际上，Vue 内部仍然会使用 Vue.extend()，对第二个参数进行转化，变成组件构造器对象，再进行 Vue.component, 只是 Vue 在内部帮我们做了这一步，所以是语法糖。</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 古老写法，局部注册 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> cp = Vue.extend(&#123;</span></span><br><span class="line">        template: `</span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容一<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容二<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line">		`</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="actionscript">	<span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line">        component: &#123;</span><br><span class="line"><span class="actionscript">            <span class="string">'cp'</span>: cp</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 语法糖形式，局部注册，由于现在不是用 vue-cli 开发，所以看上去这就像全局组件，但如果页面里你写上两个 Vue 实例，那就不一样了。 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">	<span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line">        components: &#123;</span><br><span class="line"><span class="actionscript">            <span class="string">'cp'</span>: &#123;</span></span><br><span class="line">                template: `</span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容一<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容二<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line">				`</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="抽离-template-的写法"><a href="#抽离-template-的写法" class="headerlink" title="抽离 template 的写法"></a>抽离 template 的写法</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- html 的抽离写法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"cp"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 同样外面也要包着一层，不能把这 div 去了，但可以换成别的，不过一般都是 div --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容一<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容二<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- script 标签的写法， type="text/x-template" 会保持里面的内容，不会被浏览器解析，也不会被执行，不写 type 默认 type="text/javascript" --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/x-template"</span> <span class="attr">id</span>=<span class="string">"cp"</span>&gt;</span></span><br><span class="line"><span class="handlebars"><span class="xml">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容一<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容二<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">	Vue.component(<span class="string">'cp'</span>, &#123;</span></span><br><span class="line"><span class="actionscript">        template: <span class="string">'#cp'</span></span></span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 局部组件可能这样写 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">	<span class="keyword">const</span> cp = &#123;</span></span><br><span class="line"><span class="actionscript">        template: <span class="string">'#cp'</span></span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line">        components: &#123;</span><br><span class="line"><span class="actionscript">            cp    <span class="comment">// ES6 对象的增强写法，如果有 键名与键值同名，可以直接这样写。</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span>&gt;</span><br></pre></td></tr></table></figure>

<p>每个组件可以有自己的 data 和 methods, 而且这个 data 必须写成函数的形式，原因见下面的例子</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span>&gt;</span><span class="tag">&lt;/<span class="name">cp</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span>&gt;</span><span class="tag">&lt;/<span class="name">cp</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span>&gt;</span><span class="tag">&lt;/<span class="name">cp</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"cp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        &#123;&#123; count &#125;&#125; </span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"increment"</span>&gt;</span></span><br><span class="line">            点击 count 加一</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">	<span class="comment">// ...</span></span></span><br><span class="line"><span class="actionscript">    Vue.component(<span class="string">'cp'</span>, &#123;</span></span><br><span class="line"><span class="actionscript">        template: <span class="string">'#cp'</span>,</span></span><br><span class="line">        data() &#123;</span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line">                count: 0</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            increment() &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.count++</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    /* </span><br><span class="line">    	此时我们是以函数的形式定义了组件实例的 data(当然，不这样写就会报错，不过这里想说的不是这个)。</span><br><span class="line">    	假设一下，如果我们在这里写</span><br><span class="line">            data: &#123;</span><br><span class="line">                count: 0</span><br><span class="line">            &#125;</span><br><span class="line">    	并且假设它是合法的，那么，初始化完成时上面的三个 cp 组件应该都显示 0，此时点击任何一个按钮，将会发现，三个 cp 组件中的 count 都发生了改变，原因在于它们共用了同一个对象。它们获取到的 data 对象的地址相同，每次创建组件实例的时候，都使用了同一个对象(每次都会去获取这个 data，为什么能每次都获取同一个 data 呢，因为它有名字叫做 data，所以就能通过名字访问它的地址。)。</span><br><span class="line">    	而当我们修改为函数返回形式时，每个组件的 data 对象都将成为它们自己独有的 data 对象，此时点击按钮，只会把它们自己所对应的 count 值改变。</span><br><span class="line">    	</span><br><span class="line">    	用代码来模拟，写成对象形式就相当于</span><br><span class="line"><span class="actionscript">    	<span class="keyword">const</span> obj = &#123; count: <span class="number">0</span> &#125;</span></span><br><span class="line"><span class="actionscript">    	<span class="function"><span class="keyword">function</span> <span class="title">badData</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    		<span class="keyword">return</span> obj</span></span><br><span class="line">    	&#125;</span><br><span class="line">    	</span><br><span class="line">    	写成函数形式就是</span><br><span class="line"><span class="actionscript">    	<span class="function"><span class="keyword">function</span> <span class="title">goodData</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    		<span class="keyword">return</span> &#123;</span></span><br><span class="line">    			count: 0</span><br><span class="line">    		&#125;</span><br><span class="line">    	&#125;</span><br><span class="line">    	函数形式相当于</span><br><span class="line"><span class="actionscript">    	<span class="function"><span class="keyword">function</span> <span class="title">goodData</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">    		<span class="keyword">const</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>()</span></span><br><span class="line">    		obj.count = 0</span><br><span class="line"><span class="actionscript">	    	<span class="keyword">return</span> obj</span></span><br><span class="line">    	&#125;</span><br><span class="line">    	</span><br><span class="line"><span class="actionscript">    	<span class="keyword">const</span> a = badData()</span></span><br><span class="line"><span class="actionscript">    	<span class="keyword">const</span> b = badData()</span></span><br><span class="line"><span class="actionscript">    	a === b <span class="comment">// true</span></span></span><br><span class="line">    	</span><br><span class="line"><span class="actionscript">    	<span class="keyword">const</span> c = goodData()</span></span><br><span class="line"><span class="actionscript">    	<span class="keyword">const</span> d = goodData()</span></span><br><span class="line"><span class="actionscript">    	c == d <span class="comment">// false</span></span></span><br><span class="line">    */</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="父子组件传值（组件通信）"><a href="#父子组件传值（组件通信）" class="headerlink" title="父子组件传值（组件通信）"></a>父子组件传值（组件通信）</h4><h5 id="父传子"><a href="#父传子" class="headerlink" title="父传子"></a>父传子</h5><p>使用场景：页面加载进来时，可能会有很多请求，一般只在最外层组件中进行一次请求，之后把数据下发到各个子组件中，子组件再下发到更下层的组件，而不是每个子组件独立请求，这样服务器压力较大，而且性能也不好。</p>
<p>子组件通过 props 接收来自父组件传递的值，父组件用 <code>v-bind:propname=&quot;ParentData&quot;</code> 来向子组件传递值，由于要用 v-bind 来绑定 props 中的变量名，而 v-bind 不支持驼峰，会默认转为小写，所以 props 中的变量名不要大写，如 <code>props: [&#39;aBc&#39;]</code> 之后，html 中写成 <code>&lt;cp :aBc=&quot;pData&quot;&gt;</code>，由于 html 会转小写，就变成了 <code>:abc</code> 因 此 aBc 无法接收到来自父组件的值，但如果写成 <code>&lt;cp :a-bc=&quot;pData&quot;&gt;</code> 这样是可以的，这时候使用这个值还是写 <code></code>，而不是<code>NaN</code>，这是无法识别的，它会将a 和 bc 当成两个不同的变量，中间用连字符隔开。所以 props 中的变量名就写小写。但是父组件传递来的值可以是大写的，如果还带有连字符，那么只能用 this 来获取了。如 <code>&lt;cp :abc=&quot;this[&#39;pDa-ta&#39;]&quot;&gt;</code></p>
<p>主要用到 props 属性接收来自父组件的值，它是单词 properties 的简写，推荐写成对象形式而不是数组形式，props 如果验证不通过(type、validator), Vue 会报错，但不会中止运行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp1</span> <span class="attr">:receivedata1</span>=<span class="string">"transmitData1"</span> <span class="attr">:receivedata2</span>=<span class="string">"transmitData2"</span>&gt;</span><span class="tag">&lt;/<span class="name">cp1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp2</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">:data1</span>=<span class="string">"pData1"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:data2</span>=<span class="string">"pData2"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:data3</span>=<span class="string">"pData3"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:data4</span>=<span class="string">"pData4"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:data5</span>=<span class="string">"pData5"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:data6</span>=<span class="string">"pData6"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:data7</span>=<span class="string">"pData7"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:data8</span>=<span class="string">"pData8"</span></span></span><br><span class="line"><span class="tag">     &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cp2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"cp1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        &#123;&#123; receivedata1 &#125;&#125;--&#123;&#123; receivedata1 &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"cp2"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        &#123;&#123; data1 &#125;&#125;--&#123;&#123; data2 &#125;&#125;--&#123;&#123; data3 &#125;&#125;--&#123;&#123; data4 &#125;&#125;<span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">        &#123;&#123; data5 &#125;&#125;--&#123;&#123; data6 &#125;&#125;--&#123;&#123; data7 &#125;&#125;--&#123;&#123; data8 &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> cp1 = &#123;</span></span><br><span class="line"><span class="actionscript">        template: <span class="string">'#cp1'</span>,</span></span><br><span class="line"><span class="actionscript">        props: [<span class="string">'receivedata1'</span>, <span class="string">'receivedata2'</span>] <span class="comment">// 注意这里用来接收的属性名是字符串格式</span></span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> cp2 = &#123;</span></span><br><span class="line"><span class="actionscript">        template: <span class="string">'#cp2'</span>,</span></span><br><span class="line"><span class="actionscript">        props: &#123;  <span class="comment">// 这里的 String Number Object Array 都是 JS 原生对象！不是字符串，不需要引号</span></span></span><br><span class="line"><span class="javascript">            data1: <span class="built_in">String</span>,  <span class="comment">// 表示接受 String 类型</span></span></span><br><span class="line"><span class="javascript">            data2: <span class="built_in">Number</span>,  <span class="comment">// 表示接受 Number 类型</span></span></span><br><span class="line"><span class="javascript">            data3: [<span class="built_in">String</span>, <span class="built_in">Number</span>], <span class="comment">// 表示接受 String 和 Number 类型</span></span></span><br><span class="line">            data4: &#123;</span><br><span class="line"><span class="javascript">                type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">default</span>: <span class="string">'111'</span>, <span class="comment">// 设定当父组件不向子组件传入 data4 这个值时的默认值</span></span></span><br><span class="line"><span class="actionscript">                required: <span class="literal">true</span> <span class="comment">// 设定父组件是否必须向子组件传入 data4 这个值</span></span></span><br><span class="line">            &#125;,</span><br><span class="line">            data5: &#123;</span><br><span class="line"><span class="javascript">                type: <span class="built_in">Object</span>, <span class="comment">// 表示接受 Object 类型</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 设置的默认值为引用类型时，必须这样写成函数返回值形式，理由和上面组件里的 data 为什么要写成函数形式一样，防止多个属性使用同一个变量</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">default</span>() &#123; </span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> &#123; message: <span class="string">'hello'</span> &#125;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            data6: &#123;</span><br><span class="line"><span class="javascript">                type: <span class="built_in">Array</span>,  <span class="comment">// 表示接受 Array 类型</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 设置的默认值为引用类型时，必须这样写成函数返回值形式，理由和上面组件里的 data 为什么要写成函数形式一样，防止多个属性使用同一个变量</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">default</span>() &#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line"><span class="actionscript">            data7: &#123; <span class="comment">// validator 定义一个函数，可以验证传入的值是否合法，返回一个布尔值。</span></span></span><br><span class="line"><span class="actionscript">                validator: <span class="function"><span class="keyword">function</span> <span class="params">(value)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> [<span class="string">'success'</span>, <span class="string">'warning'</span>, <span class="string">'danger'</span>].indexOf(value) !== <span class="number">-1</span></span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line"><span class="actionscript">            data8: Person <span class="comment">// 表示接受 Person 对象的实例，就和上面值那些接受 String Number Array Object 的实例对象意思一致</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span><span class="params">(name)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.name = name</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line">        data: &#123;</span><br><span class="line"><span class="actionscript">            transmitData1: <span class="string">'MyData1'</span>,</span></span><br><span class="line"><span class="actionscript">            transmitData2: <span class="string">'MyData2'</span>,</span></span><br><span class="line"><span class="actionscript">            pData1: <span class="string">'str'</span>,</span></span><br><span class="line">            pData2: 1,</span><br><span class="line">            pData3: 3,</span><br><span class="line"><span class="actionscript">            pData4: <span class="string">'str4'</span>,</span></span><br><span class="line">            pData5: &#123;</span><br><span class="line"><span class="actionscript">                message: <span class="string">'hi'</span></span></span><br><span class="line">            &#125;,</span><br><span class="line">            pData6: [1, 2, 3],</span><br><span class="line"><span class="actionscript">            pData7: <span class="string">'success'</span>,</span></span><br><span class="line"><span class="actionscript">            pData8: <span class="keyword">new</span> Person(<span class="string">'fullName'</span>)</span></span><br><span class="line">        &#125;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            cp1, cp2</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="子传父"><a href="#子传父" class="headerlink" title="子传父"></a>子传父</h5><p>子组件使用 <code>$emit(&#39;eventName&#39;, val)</code> 来向父组件传值，父组件用 <code>@eventName=&quot;eventHandle&quot;</code> 来接受子组件的值，捕获到子组件传值事件 eventName，并定义处理的回调函数 eventHandle 。 eventName 是自定义事件名。自定义事件名在非 vue-cli 的项目中不能写成大写，回调函数允许驼峰。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span> @<span class="attr">itemclick</span>=<span class="string">"cpnClick"</span>&gt;</span><span class="tag">&lt;/<span class="name">cp</span>&gt;</span> <span class="comment">&lt;!-- 捕获到子组件传值事件，并定义处理的回调函数，默认传递进来的参数是子组件传递来的 val，而不是 $event。 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"cp1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"btnClick('Cpn Click')"</span>&gt;</span>Click Here<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> cp = &#123;</span></span><br><span class="line"><span class="actionscript">        template: <span class="string">'#cp1'</span>,</span></span><br><span class="line">        methods: &#123;</span><br><span class="line">            btnClick(val) &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.$emit(<span class="string">'itemclick'</span>, val) <span class="comment">// 定义自定义事件名，供父组件捕获</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line">        data: &#123;&#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line"><span class="actionscript">            cpnClick(item) &#123; <span class="comment">// 默认接收到来自子组件的值，而不是 event 对象</span></span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(item)</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            cp</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="actionscript">    <span class="comment">// 点击 btn 将打印 'Cpn Click'</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="综合小例子"><a href="#综合小例子" class="headerlink" title="综合小例子"></a>综合小例子</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp2</span> <span class="attr">:c-num-temp1</span>=<span class="string">"num1"</span> <span class="attr">:c-num-temp2</span>=<span class="string">"num2"</span>&gt;</span><span class="tag">&lt;/<span class="name">cp2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"cp2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 此时，修改 input 内容，可以控制 cum 的值，不会影响到父组件的值，如果需要修改，见下 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 注意，如果直接 v-model cNumTemp，Vue 会报错，要求避免这种写法，这样写 cNmuTemp 的值会被子组件和父组件中各自的一个值绑定，它的值就会受到两个变量的控制，不好确定来源，但也是可以运行的，将会同步改变 cNumTemp，不会改变父组件的 num，错误中写到：需要一个变量来接收这个值之后再 v-model 这个变量，就是这里的写法，用 data 里的变量接收一下 --&gt;</span></span><br><span class="line">        &#123;&#123; cNumTemp1 &#125;&#125;</span><br><span class="line">        &#123;&#123; cnum1 &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"cnum1"</span>&gt;</span> <span class="tag">&lt;/<span class="name">br</span>&gt;</span> </span><br><span class="line">        &#123;&#123; cNumTemp2 &#125;&#125;</span><br><span class="line">        &#123;&#123; cnum2 &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"cnum2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line">        data: &#123;</span><br><span class="line">            num1: 88,</span><br><span class="line">            num2: 99</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            cp2: &#123;</span><br><span class="line"><span class="actionscript">                template: <span class="string">'#cp2'</span>,</span></span><br><span class="line">                props: &#123;</span><br><span class="line"><span class="javascript">                    cNumTemp1: <span class="built_in">Number</span>, <span class="comment">// 接收来自父组件的值</span></span></span><br><span class="line"><span class="javascript">                    cNumTemp2: <span class="built_in">Number</span> <span class="comment">// 接收来自父组件的值</span></span></span><br><span class="line">                &#125;,</span><br><span class="line">                data() &#123;</span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                        cnum1: <span class="keyword">this</span>.cNumTemp1, <span class="comment">// 把父组件的值变成自己的变量，这样使用 v-model 不会污染父组件的值。</span></span></span><br><span class="line"><span class="actionscript">                        cnum2: <span class="keyword">this</span>.cNumTemp2  <span class="comment">// 把父组件的值变成自己的变量，这样使用 v-model 不会污染父组件的值。</span></span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                methods: &#123;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 修改父组件的值，方法一： 拆分 v-model --&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    &#123;&#123;num1&#125;&#125;</span><br><span class="line">    &#123;&#123;num2&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">cp2</span> <span class="attr">:c-num-temp1</span>=<span class="string">"num1"</span> <span class="attr">:c-num-temp2</span>=<span class="string">"num2"</span> @<span class="attr">cnum1-changed</span>=<span class="string">"cnum1Changed"</span> @<span class="attr">cnum2-changed</span>=<span class="string">"cnum2Changed"</span>&gt;</span><span class="tag">&lt;/<span class="name">cp2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"cp2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 为了在修改 input 的值时修改父组件的值，此时不再能写 v-model，需要把它拆分，在自定义 input 事件中进行 $emit (发射) --&gt;</span></span><br><span class="line">        &#123;&#123; cNumTemp1 &#125;&#125;</span><br><span class="line">        &#123;&#123; cnum1 &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">:value</span>=<span class="string">"cnum1"</span> @<span class="attr">input</span>=<span class="string">"cnum1Changed"</span>&gt;</span> <span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">        &#123;&#123; cNumTemp2 &#125;&#125;</span><br><span class="line">        &#123;&#123; cnum2 &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">:value</span>=<span class="string">"cnum2"</span> @<span class="attr">input</span>=<span class="string">"cnum2Changed"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line">        data: &#123;</span><br><span class="line">            num1: 88,</span><br><span class="line">            num2: 99</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            cnum1Changed(val) &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.num1 = val</span></span><br><span class="line">            &#125;,</span><br><span class="line">            cnum2Changed(val) &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.num2 = val</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            cp2: &#123;</span><br><span class="line"><span class="actionscript">                template: <span class="string">'#cp2'</span>,</span></span><br><span class="line">                props: &#123;</span><br><span class="line"><span class="javascript">                    cNumTemp1: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="javascript">                    cNumTemp2: <span class="built_in">Number</span></span></span><br><span class="line">                &#125;,</span><br><span class="line">                data() &#123;</span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                        cnum1: <span class="keyword">this</span>.cNumTemp1,</span></span><br><span class="line"><span class="actionscript">                        cnum2: <span class="keyword">this</span>.cNumTemp2</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                methods: &#123;</span><br><span class="line">                    cnum1Changed(e) &#123;</span><br><span class="line"><span class="actionscript">                        <span class="keyword">this</span>.cnum1 = e.target.value <span class="comment">// 先修改 cum 的值，完成 v-model 做的事</span></span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">this</span>.$emit(<span class="string">'cnum1-changed'</span>, +<span class="keyword">this</span>.cnum1) <span class="comment">// 添加自己想要做的事，这里是传递修改事件给父组件，这里有个 + 号，是因为这时候传递到父组件的值是字符串，为了把它修改为数值而写的忍者代码。如果不修改为数值，这样发射到父组件，父组件修改完自己的 num 后，将会把 num 传递到子组件的 cNumTemp 中，而cNumTemp 的验证规则是 Number, 所以会出现报错。</span></span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    cnum2Changed(e) &#123;</span><br><span class="line"><span class="actionscript">                        <span class="keyword">this</span>.cnum2 = e.target.value</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">this</span>.$emit(<span class="string">'cnum2-changed'</span>, <span class="keyword">this</span>.cnum2) <span class="comment">// 这里特地没加 + 号，所以会出现报错，但能运行。</span></span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 修改父组件的值，方法二： watch 监听 --&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    &#123;&#123;num1&#125;&#125;</span><br><span class="line">    &#123;&#123;num2&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">cp2</span> <span class="attr">:c-num-temp1</span>=<span class="string">"num1"</span> <span class="attr">:c-num-temp2</span>=<span class="string">"num2"</span> @<span class="attr">cnum1-changed</span>=<span class="string">"cnum1Changed"</span> @<span class="attr">cnum2-changed</span>=<span class="string">"cnum2Changed"</span>&gt;</span><span class="tag">&lt;/<span class="name">cp2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"cp2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 为了在修改 input 的值时修改父组件的值，此时不再能写 v-model，需要把它拆分，在自定义 input 事件中进行 $emit (发射) --&gt;</span></span><br><span class="line">        &#123;&#123; cNumTemp1 &#125;&#125;</span><br><span class="line">        &#123;&#123; cnum1 &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"cnum1"</span>&gt;</span> <span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">        &#123;&#123; cNumTemp2 &#125;&#125;</span><br><span class="line">        &#123;&#123; cnum2 &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"cnum2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">	<span class="comment">// ...</span></span></span><br><span class="line">    components: &#123;</span><br><span class="line">        cp2: &#123;</span><br><span class="line"><span class="actionscript">            template: <span class="string">'#cp2'</span>,</span></span><br><span class="line">            props: &#123;</span><br><span class="line"><span class="javascript">                cNumTemp1: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="javascript">                cNumTemp2: <span class="built_in">Number</span></span></span><br><span class="line">            &#125;,</span><br><span class="line">            data() &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                    cnum1: <span class="keyword">this</span>.cNumTemp1,</span></span><br><span class="line"><span class="actionscript">                    cnum2: <span class="keyword">this</span>.cNumTemp2</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            watch: &#123;</span><br><span class="line"><span class="actionscript">                cnum1(newVal, oldVal) &#123; <span class="comment">// 写了参数不用是为了说明传进来的是啥</span></span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">this</span>.$emit(<span class="string">'cnum1-changed'</span>, +<span class="keyword">this</span>.cnum1)</span></span><br><span class="line">                &#125;，</span><br><span class="line"><span class="actionscript">                cnum2(newVal, oldVal) &#123; <span class="comment">// 写了参数不用是为了说明传进来的是啥</span></span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">this</span>.$emit(<span class="string">'cnum1-changed'</span>, newVal)</span></span><br><span class="line">                &#125;                </span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="父子组件的访问方式（组件访问）-refs"><a href="#父子组件的访问方式（组件访问）-refs" class="headerlink" title="父子组件的访问方式（组件访问）$refs"></a>父子组件的访问方式（组件访问）$refs</h4><p><code>$parent</code> 子组件可以用 $parent 来获取父组件的引用，返回父组件的实例对象，可能是 Vue 实例, 也可能是 VueComponent 实例。由于可能同一个子组件会被注册在不同的父组件下，所以获取的 <code>$parent</code> 也会不一致，可能会出现一些问题，所以不太方便。比如在该组件的某个方法中，用到了 <code>$parent.name</code>，可能这个组件的父组件有 name 属性，另一个组件的父组件没有这个属性，就出问题了。</p>
<p><code>$children</code> 父组件可以通过 $children 来取得包含了所有子组件的引用的数组，由于每次获取的是数组，所以需要通过子组件在数组中的索引来取得子组件，而且索引又不太好确定，所以这个方法不太方便。</p>
<p>以上两种获取引用方式都不太常用。一般使用 <code>$refs</code></p>
<p><code>$refs</code> 给组件加上 <code>ref=&quot;refName&quot;</code> 属性，之后通过 <code>$refs.refName</code> 来及获取指定的组件对象，这是最常用的方法。注意，不要用 $refs 做数据绑定和计算属性，因为 ref 本身是作为渲染结果拿到的，初始渲染时不能访问。此时再通过 <code>$el</code> 可以拿到组件的 DOM ，写法 <code>$refs.refName.$el</code>。</p>
<p>当 <code>$refs</code> 绑定给一个 html 元素时，<code>this.$refs.refName</code> 获取的是该 DOM 元素，在 Vue 中，如果真的想用 DOM 元素，不应该使用原生的获取 DOM 的方法，而是通过这种方式获取，因为如果在组件外部有一个同名的（比如 class），通过原生方法获取，将会拿到外部元素，而不是真正想拿到的 DOM 元素，通过 <code>this.$refs.refName</code> 可以避免这一问题。</p>
<p><code>$root</code> 获取根组件 Vue 实例，也不太用。</p>
<p>注意，在 <code>created</code> 生命周期函数中，拿不到 <code>$refs</code> 里的对象。必须要到 <code>mounted</code> 挂载 DOM 之后再获取 <code>$refs</code> 。</p>
<h4 id="组件补充"><a href="#组件补充" class="headerlink" title="组件补充"></a>组件补充</h4><h5 id="native"><a href="#native" class="headerlink" title=".native"></a>.native</h5><p>父级组件想对子组件绑定父组件的方法需要加上修饰符 <code>.native</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span> @<span class="attr">click.native</span>=<span class="string">"pToC"</span>&gt;</span><span class="tag">&lt;/<span class="name">cp</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 父组件</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    methods: &#123;</span><br><span class="line">        pToC() &#123;</span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'pToC'</span>)</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="父组件向子组件传递处理函数"><a href="#父组件向子组件传递处理函数" class="headerlink" title="父组件向子组件传递处理函数"></a>父组件向子组件传递处理函数</h5><p>可以把父组件的处理函数直接传入子组件处理，这样就不用每次都让子组件 <code>$emit</code> 出事件让父组件监听并处理。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 父组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span> <span class="attr">:on-plus</span>=<span class="string">"plusVal"</span> <span class="attr">:value</span>=<span class="string">"value"</span>&gt;</span><span class="tag">&lt;/<span class="name">cp</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">import</span> cp <span class="keyword">from</span> <span class="string">'./childComps/cp'</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">        data() &#123;</span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> &#123;</span></span><br><span class="line">              value: 0</span><br><span class="line">          &#125;  </span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            plusVal() &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.val++</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 子组件 ./childComps/cp.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        &#123;&#123;val&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"onPlus"</span>&gt;</span>增加数量<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">        props: &#123;</span><br><span class="line"><span class="javascript">            value: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="javascript">            onPlus: <span class="built_in">Function</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="事件总线-bus"><a href="#事件总线-bus" class="headerlink" title="事件总线($bus)"></a>事件总线($bus)</h4><p>new 一个 Vue 实例对象，并将它挂载到真正使用的 Vue 实例上，新 new 出来的实例对象充当中转站的作用，因为每个 Vue 实例对象上都有 <code>$emit</code> 和 <code>$on</code> 方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 挂载</span></span><br><span class="line">Vue.prototype.$bus = <span class="keyword">new</span> Vue()</span><br><span class="line"></span><br><span class="line"><span class="comment">// a 组件 传递事件到 bus</span></span><br><span class="line"><span class="keyword">this</span>.$bus.$emit(<span class="string">'eventA'</span>, params) <span class="comment">// 参数可选</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// b 组件从 bus 监听事件，如果监听到事件，就执行回调函数</span></span><br><span class="line"><span class="keyword">this</span>.$bus.$on(<span class="string">'eventA'</span>, params =&gt; &#123; <span class="built_in">console</span>.log(params) &#125;)</span><br></pre></td></tr></table></figure>

<p>需要注意的是，如果某个组件中使用了 <code>$bus.$emit</code>，并且在主页监听 <code>$bus.$on</code> 这个事件。当在 <code>App.vue</code> 中用 <code>&lt;keep-alive&gt;</code> 包裹 <code>&lt;router-view&gt;</code> ，并切换到其他页面时，主页仍然被缓存，若此时这个页面中也引入了这个组件，并且触发了它的 <code>$bus.$emit</code>，那么被 <code>&lt;keep-alive&gt;</code> 保留的主页中，仍然会用 <code>$bus.$on</code> 监听到 这个事件，并调用指定的回调函数。也就是说，在其他页面中的操作，可能会导致主页的修改，这一点需要注意。</p>
<p>所以解决方法可以是用 route, 判断是否为主页决定是否 <code>$bus.$emit</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 某组件中 */</span></span><br><span class="line">&#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        imgLoad() &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.$route.path.indexOf(<span class="string">'/home'</span>)) &#123;</span><br><span class="line">                <span class="keyword">this</span>.$bus.$emit(<span class="string">'homeImgLoad'</span>)</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.$route.path.indexOf(<span class="string">'/detail'</span>)) &#123;</span><br><span class="line">                <span class="keyword">this</span>.$bus.$emit(<span class="string">'detailImgLoad'</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="依赖注入-provide-inject"><a href="#依赖注入-provide-inject" class="headerlink" title="依赖注入(provide/inject)"></a>依赖注入(provide/inject)</h4><p><code>inject</code> 和 <code>provide</code> 是为了解决组件间通信过于复杂的问题, 比如 父组件向孙组件传递的时候, 需要传两层 prop, 再更多层次的时, 如果不用 Vuex 烦不胜烦, 但我们必然希望我们的组件有高复用性而不依赖于 Vuex, 通过这组属性, 可以直接向孙组件中注入数据, 但用的很少, 官方也并不推荐直接应用于程序代码。因为开发中必然使用 Vuex, 这个方法可能常见于 UI 库, 如 ELEMENT-UI.</p>
<p><code>provide/inject</code> 这对选项需要一起使用，以允许一个祖先组件向其所有子孙后代注入一个依赖，不论组件层次有多深，并在起上下游关系成立的时间里始终生效。</p>
<p>它们要求的值类型应该是</p>
<ul>
<li><code>provide</code> : 返回一个对象的函数或一个对象(就是 <code>data(){return {}}</code> 这样的写法, 不推荐直接写一个对象, 除非传递不在当前实例上的静态数据，即不需要 <code>this.data</code> 获取的数据)</li>
<li><code>inject</code> : 一个字符串数组(数组里每项都是字符串, 并对应 provide 的名字)，或 一个对象，对象的 key 是本地的绑定名</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 只演示一下父子组件, 展示一下功能 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 父组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cp</span>&gt;</span><span class="tag">&lt;/<span class="name">cp</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">import</span> Cp <span class="keyword">from</span> <span class="string">'./Cp'</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">        componets: &#123;</span><br><span class="line">            Cp</span><br><span class="line">        &#125;</span><br><span class="line">        data() &#123;</span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                msg: <span class="string">'parent2child msg'</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        provide() &#123;</span><br><span class="line"><span class="actionscript">            <span class="comment">// return 写法, 这样写安全靠谱！</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                pMsg: <span class="keyword">this</span>.msg</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 子组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        &#123;&#123;pMsg&#125;&#125; <span class="comment">&lt;!-- 将显示 parent2child msg, 即注入成功 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">        inject: [<span class="string">'pMsg'</span>]</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="组件传值注意点"><a href="#组件传值注意点" class="headerlink" title="组件传值注意点"></a>组件传值注意点</h4><p>组件传值是异步的，并且子组件渲染 DOM 可能比父组件慢，所以有时候需要在父组件中设置延迟。</p>
<p>比如，封装轮播图的时候，可能 <code>SwiperItem</code> 的 DOM 还未生成，而 <code>Swiper</code> 已经生成 DOM，并进入 <code>mounted</code>阶段，但此时无法获取到 <code>SwiperItem</code> 这个组件的元素，也就无法确定数量，因此会导致轮播小点的数量为 0，无法加载。</p>
<p>或者在子组件 DOM 渲染完毕时，给父组件一个标志，让它去执行初始化。</p>
<h4 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h4><h5 id="基本使用-2"><a href="#基本使用-2" class="headerlink" title="基本使用"></a>基本使用</h5><h6 id="匿名插槽"><a href="#匿名插槽" class="headerlink" title="匿名插槽"></a>匿名插槽</h6><p>当插槽不指定 name 属性的时候，是匿名插槽，如果组件标签没有包裹 DOM 内容的话，默认自动显示 <code>&lt;slot&gt;中间包裹的值&lt;/slot&gt;</code> 中间包裹的内容，如果 slot 标签中间没有内容，那就不显示。如果在组件标签中包裹了 DOM 内容，那么<code>&lt;slot&gt;&lt;/slot&gt;</code>就显示包裹的 DOM 内容，它自己中间包裹的内容不再显示。相当于把 <code>&lt;slot&gt;</code> 标签所在的位置替换为传入的 DOM 内容。插槽也是会被 <strong>整个替换</strong> 的内容，就像 <code>&lt;div id=&quot;app&quot; /&gt;</code> 被 <code>App</code> 组件整个替换一样，所以不要在插槽上写 什么属性（如 class）或是什么指令（如 v-if ，如果想要对它使用 v-if 或是 @click，在它外面包裹一层 div 标签，对这个 div 标签使用 v-if 或 @click 吧）。</p>
<p>注意，可以写多个匿名插槽，只是组件标签中传入的 DOM 内容会被反应在所有的匿名插槽上，所以一般不写。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span>&gt;</span><span class="tag">&lt;/<span class="name">cp</span>&gt;</span> <span class="comment">&lt;!-- 插槽位置显示默认值 &lt;div&gt;你好&lt;/div&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span>&gt;</span>Hi<span class="tag">&lt;/<span class="name">cp</span>&gt;</span> <span class="comment">&lt;!-- 插槽位置显示 Hi --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span>&gt;</span> <span class="comment">&lt;!-- 插槽显示 &lt;div&gt;Hello&lt;/div&gt; &lt;p&gt;World&lt;/p&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>World<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cp</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"cp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>下面是插槽<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> cp = &#123;</span></span><br><span class="line"><span class="actionscript">        template: <span class="string">'#cp'</span></span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> vm = <span class="keyword">new</span>  Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line">        components: &#123;</span><br><span class="line">            cp</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="具名插槽"><a href="#具名插槽" class="headerlink" title="具名插槽"></a>具名插槽</h6><p>指定了插槽的 name 属性后，它就是具名插槽。同样地，可以指定两个同名的插槽，都会显示，被选中的时候也都会被替换，所以一般不会出现同名插槽。<strong>匿名插槽其实是有 name 属性的，它的值默认是 default</strong>。</p>
<p>我们插入到匿名插槽中的内容，如果没有指定 slot 属性，也默认会带上 <code>slot=&quot;default&quot;</code> 属性。你也可以插入多个内容都修改同一个插槽位置。</p>
<p>新版中使用 <code>v-slot:slotName</code> 指定来指定要替换的插槽，简写形式是 <code>#slotNmae</code>，<strong>与旧版非常大的区别是，必须要在 <code>&lt;template&gt;</code> 标签上使用这个指令，这一点和旧版的 slot 属性不同，slot 在任何标签都可以使用。而且如果定义了多个 <code>&lt;template&gt;</code> 标签指向同一个插槽，只会显示最后一个 template 标签的内容</strong></p>
<p>注意 <code>slot</code> 属性和 <code>slot-scoped</code> 属性在 vue3.0 以后将无法使用，目前已被官方废弃。</p>
<blockquote>
<p>注意， v-slot 只有在 <code>&lt;template&gt;</code> 元素上才有效, slot 则都有效。</p>
</blockquote>
<p><code>template</code> 的直接子元素允许多个。之前一直以为只能写一个 <code>div</code>，这是错误的认知，但这样写好不好就是另外一回事了。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HTML 内容 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 新版写法 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 显示 left right 匿名插槽位 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span>&gt;</span><span class="tag">&lt;/<span class="name">cp</span>&gt;</span> </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 显示 left right 修改了匿名插槽内容 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span>&gt;</span>  <span class="comment">&lt;!-- 默认加上了 v-slot:default  --&gt;</span></span><br><span class="line">            修改了匿名插槽内容</span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cp</span>&gt;</span> </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 显示 修改了 name 为 left 的插槽内容 right 匿名插槽位 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:left</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">span</span>&gt;</span>修改了 name 为 left 的插槽内容<span class="tag">&lt;/<span class="name">span</span>&gt;</span>     </span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cp</span>&gt;</span> </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 显示 left right 修改了匿名插槽 default --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="name">span</span>&gt;</span>修改了匿名插槽<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span> default<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cp</span>&gt;</span> </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 显示 left 修改了 right 一次 修改了 right 二次 匿名插槽位 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">template</span> #<span class="attr">right</span>&gt;</span>  <span class="comment">&lt;!-- v-slot:right 的语法糖 --&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">span</span>&gt;</span>修改了 right 一次<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>修改了 right 二次<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cp</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 即将淘汰的旧版写法 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 显示 left right 匿名插槽位 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span>&gt;</span><span class="tag">&lt;/<span class="name">cp</span>&gt;</span> </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 显示 left right 修改了匿名插槽内容 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span>&gt;</span>修改了匿名插槽内容<span class="tag">&lt;/<span class="name">cp</span>&gt;</span> </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 显示 修改了 name 为 left 的插槽内容 right 匿名插槽位 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"left"</span>&gt;</span>修改了 name 为 left 的插槽内容<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">cp</span>&gt;</span> </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 显示 left right 修改了匿名插槽 default --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"default"</span>&gt;</span>修改了匿名插槽<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"default"</span>&gt;</span> default<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">cp</span>&gt;</span> </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 显示 left 修改了 right 一次 修改了 right 二次 匿名插槽位 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"right"</span>&gt;</span>修改了 right 一次<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"right"</span>&gt;</span>修改了 right 二次<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">cp</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 模板 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"cp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"left"</span>&gt;</span>left<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"right"</span>&gt;</span>right<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">slot</span>&gt;</span>匿名插槽位<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> cp = &#123;</span></span><br><span class="line"><span class="actionscript">        template: <span class="string">'#cp'</span></span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> vm = <span class="keyword">new</span>  Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line">        components: &#123;</span><br><span class="line">            cp</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="编译作用域"><a href="#编译作用域" class="headerlink" title="编译作用域"></a>编译作用域</h5><p>官方给出了一条准则：父组件模板的所有东西都会在父级作用域内编译，子组件模板的所有东西都会在子级作用域内编译。(原文：父级模板里的所有内容都是在父级作用域中编译的；子模板里的所有内容都是在子作用域中编译的。)</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- cp 组件将会从父组件上获取 isShow, 值为 true，组件将被渲染 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span> <span class="attr">v-show</span>=<span class="string">"isShow"</span>&gt;</span><span class="tag">&lt;/<span class="name">cp</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"cp"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        这段文本将会显示，但不会显示按钮</span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-show</span>=<span class="string">"isShow"</span>&gt;</span>这个按钮将不会出现，isShow 从组件内中获取，值为 false<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line">        data: &#123;</span><br><span class="line"><span class="actionscript">            isShow: <span class="literal">true</span>  <span class="comment">// 父组件的 isShow</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            cp: &#123;</span><br><span class="line"><span class="actionscript">                template: <span class="string">'#cp'</span>,</span></span><br><span class="line">                data() &#123;</span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                        isShow: <span class="literal">false</span></span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="作用域插槽"><a href="#作用域插槽" class="headerlink" title="作用域插槽"></a>作用域插槽</h5><p>这是比较难以理解的一个点，而且官方文档说的不够直白。在这里用一句话对其进行总结：父组件替换插槽展示的格式，但是内容由子组件来提供，即从子组件把数据传给父元素，父元素重新组合 DOM 结构后传回子组件。</p>
<p>例如，子组件中包含一组数据： <code>fLanguages: [&#39;English&#39;, &#39;Chinese&#39;, &#39;Japanese&#39;, &#39;French&#39;, &#39;Spanish&#39;]</code>，插槽默认按 li 标签展示，但此时如果希望它用 <code>-</code> 分隔后做横排展示呢？ 代码如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HTML 部分 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 新版写法 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span>&gt;</span>  <span class="comment">&lt;!-- v-slot="cpSlot" 也可以写成 #default="cpSlot"，不能写成 #="cpSlot"，必须带插槽名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">"cpSlot"</span>&gt;</span>  <span class="comment">&lt;!-- 注意，这里特地起个驼峰名是为了说明可以使用驼峰命名 --&gt;</span></span><br><span class="line">        	&#123;&#123; cpSlot.lang.join('-') &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cp</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 旧版写法 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cp</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"cpSlot"</span>&gt;</span> <span class="comment">&lt;!-- 注意，这里特地起个驼峰名是为了说明可以使用驼峰命名 --&gt;</span></span><br><span class="line">        	&#123;&#123; cpSlot.lang.join('-') &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cp</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 模板部分 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"cp"</span>&gt;</span>   <span class="comment">&lt;!-- 记住，自定义的要传到父组件的属性名是写在 slot 中，而不是最外层的 template 中 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">slot</span> <span class="attr">:laNG</span>=<span class="string">'fLanguages'</span>&gt;</span>  <span class="comment">&lt;!-- 注意，这里特地把 lang 写成 laNG 是为了再次说明 v-bind 默认把绑定的属性名转为小写，所以大写是没用的。上面仍然使用 .lang 来获取这个属性 --&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"lang in fLanguages"</span> &gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">	<span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line">        components: &#123;</span><br><span class="line">            cp: &#123;</span><br><span class="line"><span class="actionscript">                template: <span class="string">'#cp'</span>,</span></span><br><span class="line">                data() &#123;</span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                        fLanguages: [<span class="string">'English'</span>, <span class="string">'Chinese'</span>, <span class="string">'Japanese'</span>, <span class="string">'French'</span>, <span class="string">'Spanish'</span>]</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="插槽注意点"><a href="#插槽注意点" class="headerlink" title="插槽注意点"></a>插槽注意点</h5><p>如果仅仅是文本变化，就不要使用插槽了，直接使用 <code>props</code> 组件传值即可。比较复杂的变化，如结构改变，元素改变之类的再使用插槽。</p>
<h3 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h3><p>Vue 源码中总共有 12 个生命周期钩子函数，官网提到了常用的 8 个钩子。另外四个分别是 <code>errorCaptured(2.5新增，处理异常的钩子)</code> 和 <code>serverPrefetch(2.6新增 处理 ssr 的钩子)</code>。 <code>activated</code> 和 <code>deactivated</code> （<strong>拿到的 this.$route 是跳转后的 $route</strong> 和组件内守卫 beforeRouteLeave 拿到的 this.$route 是不一样的，守卫拿到的是跳转前的 $route）专用于 keep-alive，当组件在<code>&lt;keep-alive&gt;&lt;/keep-alive&gt;</code> 这个抽象组件内被切换，才会触发这两个钩子，并且 <strong>不会</strong> 触发 <code>created</code> 和 <code>destroyed</code> 钩子，因为切换时组件只是缓存而不是被销毁。根据业务选择合适的钩子。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    data: &#123;</span><br><span class="line">        msg: <span class="string">'Vue 生命周期'</span></span><br><span class="line">    &#125;,</span><br><span class="line">     <span class="comment">// 第一个参数 '%c%s' 表示后面的两个参数一个表示打印内容的css样式，一个表示正常打印的字符串内容，我们正常写的 console.log('msg') 其实就是 console.log('%s', 'msg') 的简写。第一个参数表示后面的参数是干嘛的。</span></span><br><span class="line">    beforeCreate() &#123;</span><br><span class="line">        <span class="built_in">console</span>.group(<span class="string">'创建前的状态'</span>) <span class="comment">// 可以把该函数内 console.log 弄成一组。</span></span><br><span class="line">    	<span class="built_in">console</span>.log(<span class="string">'%c%s'</span>, <span class="string">'color: red'</span>, <span class="string">'el: '</span> + <span class="keyword">this</span>.$el) <span class="comment">// undefined</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'%c%s'</span>, <span class="string">'color: red'</span>, <span class="string">'data: '</span> + <span class="keyword">this</span>.$data) <span class="comment">// undefined</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/* 常用钩子 */</span></span><br><span class="line">    created() &#123;</span><br><span class="line">        <span class="built_in">console</span>.gruop(<span class="string">'创建后的状态'</span>)</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'%c%s'</span>, <span class="string">'color: red'</span>, <span class="string">'el: '</span> + <span class="keyword">this</span>.$el) <span class="comment">// undefined</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'%c%s'</span>, <span class="string">'color: red'</span>, <span class="string">'data: '</span> + <span class="keyword">this</span>.$data) <span class="comment">// data: [Object Object]</span></span><br><span class="line">    &#125;,</span><br><span class="line">    beforeMount() &#123;</span><br><span class="line">        <span class="built_in">console</span>.group(<span class="string">'挂载前的状态'</span>)</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'%c%s'</span>, <span class="string">'color: red'</span>, <span class="string">'el: '</span> + <span class="keyword">this</span>.$el)  <span class="comment">// undefined  虚拟 DOM 阶段，由于 Chrome 的 console.log 的折叠项是懒加载的，可能在此处就会打印出本应在 mounted 里面的真实 DOM</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'%c%s'</span>, <span class="string">'color: red'</span>, <span class="string">'data: '</span> + <span class="keyword">this</span>.$data) <span class="comment">//data: [Object Object]</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/* 常用钩子 */</span></span><br><span class="line">    mounted() &#123;</span><br><span class="line">        <span class="built_in">console</span>.group(<span class="string">'挂载后的状态'</span>)</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'%c%s'</span>, <span class="string">'color: red'</span>, <span class="string">'el: '</span> + <span class="keyword">this</span>.$el)  <span class="comment">// el: [Object HTMLDivElement] &lt;div id="app"&gt;&lt;/div&gt;  真实 DOM 已被挂载</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'%c%s'</span>, <span class="string">'color: red'</span>, <span class="string">'data: '</span> + <span class="keyword">this</span>.$data) <span class="comment">//data: [Object Object]</span></span><br><span class="line">    &#125;,</span><br><span class="line">    beforeUpdate() &#123;</span><br><span class="line">        <span class="comment">// mounted 完成后，才会开始响应式的检测</span></span><br><span class="line">        <span class="built_in">console</span>.group(<span class="string">'更新前的状态'</span>)</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.msg) <span class="comment">// 假设修改了 msg 的值，就会触发，并且这里拿到的是修改后的 msg 值，与 update 钩子的区别在于页面是否重新渲染，即 view 层此时没有变化，这是修改 data 的最后时机</span></span><br><span class="line">		<span class="comment">// 任意 data 中的数据发生改变，都会触发该钩子</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/* 常用钩子 */</span></span><br><span class="line">    updated() &#123;</span><br><span class="line">        <span class="built_in">console</span>.group(<span class="string">'更新后的状态'</span>)</span><br><span class="line">		<span class="comment">// 任意 data 中的数据发生改变，都会触发该钩子</span></span><br><span class="line">        <span class="comment">// 注意，不要在这里进行数据修改</span></span><br><span class="line">    &#125;,</span><br><span class="line">    beforeDestroy() &#123;</span><br><span class="line">        <span class="built_in">console</span>.group(<span class="string">'beforeDestroy 销毁前状态===============》'</span>)</span><br><span class="line">        <span class="comment">// 一般在这里执行 清除计时器、清除非指令绑定的事件 等操作</span></span><br><span class="line">    &#125;,</span><br><span class="line">    destroyed() &#123;</span><br><span class="line">		<span class="comment">// 新组件的 created 一般在 旧组件的 destroyed 之前。因为销毁需要时间</span></span><br><span class="line">        <span class="built_in">console</span>.group(<span class="string">'beforeDestroy 销毁后状态===============》'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>)</span><br></pre></td></tr></table></figure>

<h4 id="Vue-的-DOM-更新"><a href="#Vue-的-DOM-更新" class="headerlink" title="Vue 的 DOM 更新"></a>Vue 的 DOM 更新</h4><p>Vue 在下一个事件循环开始执行更新时才会进行必要的 <code>DOM</code> 更新。</p>
<p>进入页面中，会先渲染根组件，再一步步渲染子组件，也因此，可能根组件已经到了 mounted 阶段，而子组件仍然处于 created 阶段。而此时，如果获取 DOM，就会出现一些问题。如果想要等到子组件也渲染完毕才获取 DOM，可以在 <code>this.$nextTick()</code> 中操作。</p>
<h4 id="this-nextTick"><a href="#this-nextTick" class="headerlink" title="this.$nextTick()"></a>this.$nextTick()</h4><p><em>tick: 事件循环</em></p>
<p>在下次 <code>DOM</code> 更新循环结束之后执行延迟回调。因此可以满足上面的全部组件渲染完毕之后回调的需求。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        <span class="keyword">this</span>.$nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// ... 操作 DOM，此时子组件也已渲染完毕(图片等资源可能还未加载，但 img 标签已经在页面中)</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>另外的用法是，在修改数据之后立即使用这个方法，可以获取更新后的 <code>DOM</code>。因为只要监听到数据变化， Vue 将开启一个队列，并缓冲同一事件循环中发生的所有数据变更（在这个队列中还包括了去重功能，比如同一个 watcher 被多次触发，只会被推入到队列中一次，避免了不必要的计算和 DOM 操作），也就是说，在一定时间之后 Vue 根据该队列的内容更新 DOM。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'example'</span>, &#123;</span><br><span class="line">    template: <span class="string">'&lt;span&gt;&#123;&#123; msg &#125;&#125;&lt;/span&gt;'</span>,</span><br><span class="line">    date() &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            msg: <span class="string">'未更新'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        <span class="keyword">this</span>,msg = <span class="string">'已更新'</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.$el.textContent) <span class="comment">// 未更新</span></span><br><span class="line">    	<span class="comment">// 这种用法要跟在数据修改后面</span></span><br><span class="line">    	<span class="keyword">this</span>.$nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.$el.textContent) <span class="comment">// 已更新</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="与-updated-的比较"><a href="#与-updated-的比较" class="headerlink" title="与 updated 的比较"></a>与 updated 的比较</h5><p>上面我们说到，在发生数据修改的时候都会触发 <code>beforeUpdate</code> 和 <code>updated</code> 这两个钩子函数，如果要对特定的修改执行 <code>updated</code> 函数非常麻烦。官方为此提供了另外一种解决办法，那就是<code>$nextTick</code>，它只会触发一次， <code>updated</code> 将会一直监听。</p>
<p><code>this.$nextTick</code> 执行的比 updated 更早，它是在某个或某几个数据（调用 <code>nextTick</code> 方法之前的数据修改）被修改之后，被影响的 DOM 渲染完成后调用， <code>updated</code> 是在受数据影响的 DOM 全部重新渲染完毕时，才触发。</p>
<p>在 created 中修改数据，不会触发 <code>updated</code> 钩子，但会触发 <code>$nextTick</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">          a: <span class="string">''</span>,</span><br><span class="line">          b: <span class="string">''</span>,</span><br><span class="line">          c: <span class="string">''</span></span><br><span class="line">      &#125;  </span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        <span class="keyword">this</span>.a = <span class="string">'nextTick'</span></span><br><span class="line">        <span class="keyword">this</span>.b = <span class="string">'nextTick'</span></span><br><span class="line">        <span class="keyword">this</span>.$nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'nextTick done'</span>) <span class="comment">// 先执行</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">this</span>.c = <span class="string">'updated'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    updated() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'updated done'</span>) <span class="comment">// 在 nextTick 之后执行</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="额外"><a href="#额外" class="headerlink" title="额外"></a>额外</h3><h4 id="Vue-use"><a href="#Vue-use" class="headerlink" title="Vue.use"></a>Vue.use</h4><p>Vue.use 实际是调用了传入对象的 install 方法，同时会传进来 Vue。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将会打印定义的内容</span></span><br><span class="line">Vue.use(&#123;</span><br><span class="line">    install(Vue) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(Vue)</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Vue.use call install'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="Vue-option-data"><a href="#Vue-option-data" class="headerlink" title="Vue.$option.data()"></a>Vue.$option.data()</h4><p>可以通过 Vue.$option.data() 拿到最初传入组件的 data 对象，可以用于初始化。调用的时候如果用来访问 props 或 methods，注意 this 的指向，应该写成 <code>Vue.$options.data.call(this)</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            msg: <span class="string">'before'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">        <span class="keyword">this</span>.msg = <span class="string">'after'</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.msg) <span class="comment">// after</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.$options.data().msg) <span class="comment">// before</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="vue-cli-做的事，一切皆组件。"><a href="#vue-cli-做的事，一切皆组件。" class="headerlink" title="vue-cli 做的事，一切皆组件。"></a>vue-cli 做的事，一切皆组件。</h4><p>Vue 实例上 template 和 el 的关系，编译时 template 中的内容将完全替换 el 挂载的元素，此时页面中不会有 id 为 app 的元素了。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	在这个例子中，id 为 app 的 div 将被替换成不带 id 的 &lt;div&lt;div&gt;，即</span></span><br><span class="line"><span class="comment">    &lt;div&gt;</span></span><br><span class="line"><span class="comment">        &lt;div&gt;hellow&lt;/div&gt;</span></span><br><span class="line"><span class="comment">        &lt;div&gt;world&lt;/div&gt;</span></span><br><span class="line"><span class="comment">        &lt;button&gt;Click here&lt;/button&gt;</span></span><br><span class="line"><span class="comment">    &lt;div&gt;</span></span><br><span class="line"><span class="comment">	同时，如果在渲染完成之后修改 vm.msg 的值，比如改成 'hi'，页面中的 hello 也会变成 hi，这是因为 vue 保存了一份 id 为 app 的 div 的模板，所以它仍然知道哪里需要修改，即使页面中现在已经找不到 id 为 app 的 div 了。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">	<span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line">        data: &#123;</span><br><span class="line"><span class="actionscript">            msg: <span class="string">'hello'</span>,</span></span><br><span class="line"><span class="actionscript">            name: <span class="string">'world'</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        template: `</span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><span class="template-variable">&#123;&#123;msg&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><span class="template-variable">&#123;&#123;name&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"clickHandle"</span>&gt;</span>Click here<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">			<span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line">		`,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            clickHandle() &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>此时看上去，vm 的代码复杂又冗余，到时候修改起来非常不方便，这时候就需要抽离 template</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 把 template 抽离出来之后，发现根组件的 data 和 methods 也就没用了，都需要放到 App 组件中，那就都放进去。</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> App = &#123;</span></span><br><span class="line">        template: `</span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><span class="template-variable">&#123;&#123;msg&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><span class="template-variable">&#123;&#123;name&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"clickHandle"</span>&gt;</span>Click here<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">			<span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line">		`,</span><br><span class="line">        data: &#123;</span><br><span class="line"><span class="actionscript">            msg: <span class="string">'hello'</span>,</span></span><br><span class="line"><span class="actionscript">            name: <span class="string">'world'</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            clickHandle() &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="actionscript">    <span class="comment">// const vm =  也可以省了，因为我们其实不需要 vm 这个实例来获取里面的属性，以上只是为了 console 方便才获取一下这个对象</span></span></span><br><span class="line"><span class="actionscript">	<span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="actionscript">        template: <span class="string">'&lt;App /&gt;'</span>, <span class="comment">// 需要注册 App 组件之后才能使用！ 当然，这里也可以写 &lt;app /&gt; 毕竟 vue 会帮我们做大小写转换。</span></span></span><br><span class="line">        components: &#123;</span><br><span class="line">            App</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">之后可能会演变成多个 js 文件，而 main.js 文件将会变得非常简洁</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- main.js --&gt;</span></span><br><span class="line">import Vue from 'vue'  // 当然这一行代码需要在 webpack.config,js 里配置一下别名 alias，选中带编译模块功能的 vue 版本 vue.esm.js</span><br><span class="line">import App from 'App.js'</span><br><span class="line">new Vue(&#123;</span><br><span class="line">    el: '#app',</span><br><span class="line">    template: '<span class="tag">&lt;<span class="name">App</span> /&gt;</span>', // 需要注册 App 组件之后才能使用！ 当然，这里也可以写 <span class="tag">&lt;<span class="name">app</span> /&gt;</span> 毕竟 vue 会帮我们做大小写转换。</span><br><span class="line">    components: &#123;</span><br><span class="line">        App</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- App.js --&gt;</span></span><br><span class="line">export default &#123;</span><br><span class="line">    template: `</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"clickHandle"</span>&gt;</span>Click here<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    `,</span><br><span class="line">    data: &#123;</span><br><span class="line">        msg: 'hello',</span><br><span class="line">        name: 'world'</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        clickHandle() &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这大概就是 vue-cli 最初的想法。</p>
<p>之后为了把 template 和 js 代码分离开来，出现了 .vue 文件，把 template 与 js 区分，顺便带上了 css, 它需要 webpack 安装 vue-loader(让 webpack 认识 vue 文件，只负责加载，无法解析) 和 vue-template-complier(用于编译模板，解析模板) 支持</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div&gt;&#123;&#123;msg&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div&gt;&#123;&#123;name&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;button @click&#x3D;&quot;clickHandle&quot;&gt;Click here&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &#39;App&#39;,   &#x2F;&#x2F; 定义了组件名，这样在 vue-devtools 里可以找到这个组件</span><br><span class="line">        data: &#123;</span><br><span class="line">            msg: &#39;hello&#39;,</span><br><span class="line">            name: &#39;world&#39;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            clickHandle() &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>


      
    </div>
    
    
    

    

    
      <div class="post-share">分享到：</div>
    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div></div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>Donate</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.png" alt="Dloux WeChat Pay"/>
        <p>WeChat Pay</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.png" alt="Dloux Alipay"/>
        <p>Alipay</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Vue/" rel="tag"># Vue</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/06/18/CORS/" rel="next" title="CORS">
                <i class="fa fa-chevron-left"></i> CORS
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/07/15/vuex/" rel="prev" title="vuex">
                vuex <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <div class="disqus-loading">
          <strong>Disqus 加载中...</strong>
          <p>如果长时间无法加载，请针对 disq.us | disquscdn.com | disqus.com 启用代理</p>
        </div>
      </div>
    </div>

  





  

    
      <script type="text/javascript">
        if (disqus_config) {
          var disqus_config = function () {
            this.page.url = 'https://dloux.gitee.io/2020/07/09/vue/';
            this.page.identifier = '2020/07/09/vue/';
            this.page.title = 'Vue';
          };
          if (window.DISQUS) {
            $('.disqus-loading').remove();
            window.DISQUS.reset({
              reload: true,
              config: function () {
                this.page.url = 'https://dloux.gitee.io/2020/07/09/vue/';
                this.page.identifier = '2020/07/09/vue/';
                this.page.title = 'Vue';
              }
            });
          }
        }
        else {
          var disqus_config = function () {
            this.page.url = 'https://dloux.gitee.io/2020/07/09/vue/';
            this.page.identifier = '2020/07/09/vue/';
            this.page.title = 'Vue';
          };
          var d = document, s = d.createElement('script');
          s.src = 'https://diygod-me.disqus.com/embed.js';
          s.setAttribute('data-timestamp', '' + +new Date());
          (d.head || d.body).appendChild(s);
        }
      </script>
    

  




	





  















        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/sidebar-card.jpg"
                alt="Dloux" />
            
              <p class="site-author-name" itemprop="name"><span style="opacity:.2;"></span>Dloux</p>
              <p class="site-description motion-element" itemprop="description">你能抓到我么？</p>
          </div>

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/dlouxgit" target="_blank" title="GitHub" data-balloon="GitHub" data-balloon-pos="up">
                    
                      <i class="fa fa-fw fa-github"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://twitter.com/dlouxgit" target="_blank" title="Twitter" data-balloon="Twitter" data-balloon-pos="up">
                    
                      <i class="fa fa-fw fa-twitter"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="/images/qq-g.jpg" target="_blank" title="QQ 群" data-balloon="QQ 群" data-balloon-pos="up">
                    
                      <i class="fa fa-fw fa-qq"></i></a>
                </span>
              
            
          </div>

          

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">39</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            
            

          </nav>

          
          
            <div class="cc-license motion-element" itemprop="license">
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank">
                <img src="/images/cc-by-nc-sa.png" alt="Creative Commons" />
              </a>
            </div>
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Vue-js"><span class="nav-number">1.</span> <span class="nav-text">Vue.js</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#基本使用"><span class="nav-number">1.1.</span> <span class="nav-text">基本使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#插值表达式-mustache"><span class="nav-number">1.1.1.</span> <span class="nav-text">插值表达式 mustache</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基本指令"><span class="nav-number">1.1.2.</span> <span class="nav-text">基本指令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#v-once"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">v-once</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#v-for"><span class="nav-number">1.1.2.2.</span> <span class="nav-text">v-for</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#v-html"><span class="nav-number">1.1.2.3.</span> <span class="nav-text">v-html</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#v-text"><span class="nav-number">1.1.2.4.</span> <span class="nav-text">v-text</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#v-pre"><span class="nav-number">1.1.2.5.</span> <span class="nav-text">v-pre</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#v-cloak"><span class="nav-number">1.1.2.6.</span> <span class="nav-text">v-cloak</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#v-bind"><span class="nav-number">1.1.2.7.</span> <span class="nav-text">v-bind</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#初始值的定义"><span class="nav-number">1.1.2.7.1.</span> <span class="nav-text">初始值的定义</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#v-show"><span class="nav-number">1.1.2.8.</span> <span class="nav-text">v-show</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#v-if"><span class="nav-number">1.1.2.9.</span> <span class="nav-text">v-if</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#v-model"><span class="nav-number">1.1.2.10.</span> <span class="nav-text">v-model</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#radio"><span class="nav-number">1.1.2.10.1.</span> <span class="nav-text">radio</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#checkbox"><span class="nav-number">1.1.2.10.2.</span> <span class="nav-text">checkbox</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#select"><span class="nav-number">1.1.2.10.3.</span> <span class="nav-text">select</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#v-model-的拆解"><span class="nav-number">1.1.2.10.4.</span> <span class="nav-text">v-model 的拆解</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#v-model-修饰符"><span class="nav-number">1.1.2.10.5.</span> <span class="nav-text">v-model 修饰符</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#v-on"><span class="nav-number">1.1.2.11.</span> <span class="nav-text">v-on</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#事件修饰符"><span class="nav-number">1.1.2.12.</span> <span class="nav-text">事件修饰符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#自定义指令"><span class="nav-number">1.1.2.13.</span> <span class="nav-text">自定义指令</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#计算属性"><span class="nav-number">1.1.3.</span> <span class="nav-text">计算属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#过滤器"><span class="nav-number">1.1.4.</span> <span class="nav-text">过滤器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#watch"><span class="nav-number">1.1.5.</span> <span class="nav-text">watch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#响应式"><span class="nav-number">1.1.6.</span> <span class="nav-text">响应式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Vue-set-obj-key-newVal"><span class="nav-number">1.1.6.1.</span> <span class="nav-text">Vue.set(obj, key, newVal)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vue-delete-obj-key"><span class="nav-number">1.1.6.2.</span> <span class="nav-text">Vue.delete(obj, key)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#混入"><span class="nav-number">1.1.7.</span> <span class="nav-text">混入</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#合并策略"><span class="nav-number">1.1.7.1.</span> <span class="nav-text">合并策略</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用"><span class="nav-number">1.1.7.2.</span> <span class="nav-text">使用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#组件"><span class="nav-number">1.1.8.</span> <span class="nav-text">组件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#基本使用-1"><span class="nav-number">1.1.8.1.</span> <span class="nav-text">基本使用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#简单举例"><span class="nav-number">1.1.8.1.1.</span> <span class="nav-text">简单举例</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#把上面的例子用父子组件来改写"><span class="nav-number">1.1.8.1.1.1.</span> <span class="nav-text">把上面的例子用父子组件来改写</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#语法糖形式"><span class="nav-number">1.1.8.1.2.</span> <span class="nav-text">语法糖形式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#抽离-template-的写法"><span class="nav-number">1.1.8.1.3.</span> <span class="nav-text">抽离 template 的写法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#父子组件传值（组件通信）"><span class="nav-number">1.1.8.2.</span> <span class="nav-text">父子组件传值（组件通信）</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#父传子"><span class="nav-number">1.1.8.2.1.</span> <span class="nav-text">父传子</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#子传父"><span class="nav-number">1.1.8.2.2.</span> <span class="nav-text">子传父</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#综合小例子"><span class="nav-number">1.1.8.2.2.1.</span> <span class="nav-text">综合小例子</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#父子组件的访问方式（组件访问）-refs"><span class="nav-number">1.1.8.3.</span> <span class="nav-text">父子组件的访问方式（组件访问）$refs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#组件补充"><span class="nav-number">1.1.8.4.</span> <span class="nav-text">组件补充</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#native"><span class="nav-number">1.1.8.4.1.</span> <span class="nav-text">.native</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#父组件向子组件传递处理函数"><span class="nav-number">1.1.8.4.2.</span> <span class="nav-text">父组件向子组件传递处理函数</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#事件总线-bus"><span class="nav-number">1.1.8.5.</span> <span class="nav-text">事件总线($bus)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#依赖注入-provide-inject"><span class="nav-number">1.1.8.6.</span> <span class="nav-text">依赖注入(provide&#x2F;inject)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#组件传值注意点"><span class="nav-number">1.1.8.7.</span> <span class="nav-text">组件传值注意点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#插槽"><span class="nav-number">1.1.8.8.</span> <span class="nav-text">插槽</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#基本使用-2"><span class="nav-number">1.1.8.8.1.</span> <span class="nav-text">基本使用</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#匿名插槽"><span class="nav-number">1.1.8.8.1.1.</span> <span class="nav-text">匿名插槽</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#具名插槽"><span class="nav-number">1.1.8.8.1.2.</span> <span class="nav-text">具名插槽</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#编译作用域"><span class="nav-number">1.1.8.8.2.</span> <span class="nav-text">编译作用域</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#作用域插槽"><span class="nav-number">1.1.8.8.3.</span> <span class="nav-text">作用域插槽</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#插槽注意点"><span class="nav-number">1.1.8.8.4.</span> <span class="nav-text">插槽注意点</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#生命周期"><span class="nav-number">1.1.9.</span> <span class="nav-text">生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Vue-的-DOM-更新"><span class="nav-number">1.1.9.1.</span> <span class="nav-text">Vue 的 DOM 更新</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#this-nextTick"><span class="nav-number">1.1.9.2.</span> <span class="nav-text">this.$nextTick()</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#与-updated-的比较"><span class="nav-number">1.1.9.2.1.</span> <span class="nav-text">与 updated 的比较</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#额外"><span class="nav-number">1.1.10.</span> <span class="nav-text">额外</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Vue-use"><span class="nav-number">1.1.10.1.</span> <span class="nav-text">Vue.use</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vue-option-data"><span class="nav-number">1.1.10.2.</span> <span class="nav-text">Vue.$option.data()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#vue-cli-做的事，一切皆组件。"><span class="nav-number">1.1.10.3.</span> <span class="nav-text">vue-cli 做的事，一切皆组件。</span></a></li></ol></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-image"></div>
      <div class="footer-inner">
        <p>博客已萌萌哒运行<span id="since"></span><span class="my-face">(●'◡'●)ﾉ♥</span></p>
<p>custom text</p>

<p>© <span itemprop="copyrightYear">2021</span> Dloux.
    由 <a href="https://hexo.io/" target="_blank" class="external" rel="nofollow">Hexo</a> 强力驱动.
    Theme By <a href="https://github.com/DIYgod/hexo-theme-sagiri" target="_blank" class="external" rel="nofollow">Sagiri</a> v0.0.4.
    <a href="/sitemap.xml" target="_blank">站点地图</a>.
    xxxx.
</p>
<p>Made with <i class="fa fa-heart throb" style="color: #d43f57;"></i> by <span class="author" itemprop="copyrightHolder">Dloux</span>. </p>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    <canvas id="evanyou"></canvas>
    <!-- 暂时注释 live2d
    <canvas id="live2d" width="150" height="400" class="live2d"></canvas>
    -->
    

  </div>

  <script type="text/javascript" src="/js/sagiri.min.js?v=0.0.4"></script>

  





  

  
  

  

  

  

</body>
</html>
